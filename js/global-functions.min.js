$j(document).ready(function(){bookacti_select2_init();$j("body").on("select2:select",'select.bookacti-select2-ajax[data-sortable="1"], select.bookacti-select2-no-ajax[data-sortable="1"]',function(a){typeof a.params!=="undefined"&&typeof a.params.data!=="undefined"&&typeof a.params.data.id!=="undefined"&&(a=a.params.data.id,a=$j(this).find('option[value="'+a+'"]'),a.length&&(a.detach(),$j(this).append(a),$j(this).trigger("change")))});bookacti_init_jquery_ui_dialogs();$j("body").on("click",".ui-widget-overlay",
function(){$j(".bookacti-backend-dialog:ui-dialog:visible").dialog("close")});$j("body").on("keydown",".bookacti-backend-dialog",function(a){if(!$j("textarea").is(":focus")&&a.keyCode==$j.ui.keyCode.ENTER)return $j(this).parent().find(".ui-dialog-buttonpane button:first").focus(),!1});moment.locale(bookacti_localized.fullcalendar_locale);bookacti_init_moment_format_from_php_date_format();$j("body").on("keypress",'.bookacti-input[type="number"]:not([step=""]), .bookacti-input.bookacti-duration-field',
function(a){var c=$j(this).attr("step");typeof a.charCode!=="undefined"&&($j.isNumeric(c)&&Math.floor(c)!=c||a.charCode>=48&&a.charCode<=57||a.charCode==13||a.preventDefault())})});var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("testPassive",null,opts);window.removeEventListener("testPassive",null,opts)}catch(a){}
window.addEventListener("touchstart",function bookacti_detect_touch_device(){bookacti.is_touch_device=!0;window.removeEventListener("touchstart",bookacti_detect_touch_device)},supportsPassive?{passive:!0}:!1);function bookacti_init_tooltip(){typeof $j.fn.tipTip=="function"&&$j(".bookacti-tip").tipTip({attribute:"data-tip",fadeIn:200,fadeOut:200,delay:200,maxWidth:"300px",keepAlive:!0})}
function bookacti_init_jquery_ui_dialogs(a){typeof a==="undefined"&&(a=".bookacti-backend-dialog");$j(a).dialog({modal:!0,autoOpen:!1,minHeight:300,minWidth:460,resize:"auto",show:!0,hide:!0,dialogClass:"bookacti-dialog",beforeClose:function(){if(bookacti_localized.is_admin&&typeof bookacti_empty_all_dialog_forms!=="undefined"){var c=$j(this).attr("id");c&&(a="#"+c);bookacti_empty_all_dialog_forms(a)}}})}
function bookacti_get_loading_html(){return'<div class="bookacti-loading-container"><div class="bookacti-loading-image"><div class="bookacti-spinner"></div></div><div class="bookacti-loading-text">'+bookacti_localized.loading+"</div></div>"}function bookacti_add_loading_html(a,c){c=c?c:"append";var d=bookacti_get_loading_html();c==="before"?a.before(d):c==="after"?a.after(d):c==="prepend"?a.prepend(d):a.append(d)}
function bookacti_remove_loading_html(a){a.find(".bookacti-loading-container").addBack(".bookacti-loading-container").remove()}function bookacti_scroll_to(a,c,d){c=$j.isNumeric(c)?parseInt(c):500;d=d!=="middle"?"top":"middle";var b=typeof a==="number"?a:a.length?a.offset().top:$j(document).scrollTop(),e=b;d==="middle"&&typeof a!=="number"&&a.length&&(a=a.height(),d=$j(window).height(),a<d&&(e=b-(d/2-a/2)));$j("html, body").animate({scrollTop:e},c)}
function bookacti_pad(a,c){a=a.toString();return a.length<c?bookacti_pad("0"+a,c):a}function bookacti_is_numeric(a){var c=jQuery.type(a);return(c==="number"||c==="string")&&!isNaN(a-parseFloat(a))}function bookacti_compare_arrays(a,c){return $j(a).not(c).length===0&&$j(c).not(a).length===0}
function bookacti_serialize_object(a){function c(b,e){if(b.length<1)return e;var f=b[0];f.slice(-1)=="]"&&(f=f.slice(0,-1));var g={};b.length==1?g[f]=e:(b.shift(),b=c(b,e),g[f]=b);return g}var d={};a=function(b){var e=[];$j.each(b.serializeArray(),function(f,g){if(g.name.indexOf("[]")<0)return e.push(g),!0;var h=g.name.split("[]")[0],k=!1;$j.each(e,function(l,m){m.name===h&&(k=!0,e[l].value.push(g.value))});k||e.push({name:h,value:[g.value]})});return e}(a);$j.each(a,function(){var b=this.value,e=
this.name.split("[");b=c(e,b);$j.extend(!0,d,b)});return d}
function bookacti_select2_init(){function a(d,b){$j(b).data("data",d);return d.text}if($j.fn.select2){var c={language:bookacti_localized.fullcalendar_locale,containerCssClass:"bookacti-select2-selection",selectionCssClass:"bookacti-select2-selection",dropdownCssClass:"bookacti-select2-dropdown",minimumResultsForSearch:1,minimumInputLength:0,width:"element",dropdownAutoWidth:!1,dropdownParent:$j(this).closest(".bookacti-backend-dialog").length?$j(this).closest(".bookacti-backend-dialog"):$j("body"),
escapeMarkup:function(d){return d},templateResult:a,templateSelection:a};$j("body").trigger("bookacti_select2_init_data",[c]);$j("select.bookacti-select2-no-ajax:not(.select2-hidden-accessible)").select2(c);$j("select.bookacti-select2-ajax:not(.select2-hidden-accessible)").select2($j.extend(!0,c,{minimumResultsForSearch:0,ajax:{url:bookacti_localized.ajaxurl,dataType:"json",delay:1E3,data:function(d){var b=$j(this).data("type")?$j(this).data("type").trim():"",e=$j(this).data("params")?JSON.parse(JSON.stringify($j(this).data("params"))):
{},f=[];$j(this).find("option").each(function(){$j(this).val()!==""&&f.push({id:$j(this).val(),text:$j(this).text()})});d=$j.extend(e,{action:b?"bookactiSelect2Query_"+b:"bookactiSelect2Query",term:typeof d.term=="string"?d.term:"",options:f,name:$j(this).attr("name")?$j(this).attr("name"):"",id:$j(this).attr("id")?$j(this).attr("id"):"",nonce:bookacti_localized.nonce_query_select2_options});$j(this).trigger("bookacti_select2_query_data",[d]);return d},processResults:function(d){var b={results:typeof d.options!==
"undefined"?d.options:[]};$j(this).trigger("bookacti_select2_query_results",[b,d]);return b},transport:function(d,b,e){if(d.data.term.length>=Math.max(c.minimumInputLength,3)){var f=$j.ajax(d);f.then(b);f.fail(e)}else f={abort:function(){}},b({options:d.data.options});return f},cache:!0}}));$j("body").on("select2:open","select.bookacti-select2-ajax",function(){$j("input.select2-search__field").attr("placeholder",bookacti_localized.select2_search_placeholder.replace("{nb}",Math.max(c.minimumInputLength,
3)))});bookacti_select2_sortable_init()}}
function bookacti_select2_sortable_init(a){typeof a==="undefined"&&(a='.select2-hidden-accessible[data-sortable="1"] + .select2-container .bookacti-select2-selection.select2-selection--multiple .select2-selection__rendered');$j(a).length&&$j(a).sortable({containment:"parent",items:".select2-selection__choice",update:function(c,d){var b=$j(d.item).parents(".select2-container").prev(".select2-hidden-accessible");b.length&&b.data("sortable")&&$j(d.item).parents(".select2-container").find(".select2-selection__choice").each(function(e,f){e=
!1;typeof $j(f).data("data")!=="undefined"&&typeof $j(f).data("data").id!=="undefined"&&(e=$j(f).data("data").id);if(e===!1)return!0;f=b.find('option[value="'+e+'"]');if(!f.length)return!0;f.detach();b.append(f)})}})}function bookacti_select2_destroy(a){$j.fn.select2&&$j(a).length&&$j(a).hasClass("select2-hidden-accessible")&&$j(a).select2("destroy")}
function bookacti_init_moment_format_from_php_date_format(){(function(a){moment.fn.formatPHP=function(c){return this.format(bookacti_convert_php_datetime_format_to_moment_js(c))}})(moment)}
function bookacti_convert_php_datetime_format_to_moment_js(a){if(typeof a!=="string"||!a.length)return"";var c={d:"DD",D:"ddd",j:"D",S:"Do",l:"dddd",N:"E",w:"d",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",o:"GGGG",Y:"YYYY",y:"YY",a:"a",A:"A",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"X",e:"z",O:"ZZ",P:"Z",T:"z",c:"YYYY-MM-DD[T]HH:mm:ssZ",r:"ddd, DD MMM YYYY HH:mm:ss ZZ",U:"X"};a=a.replace("jS","S");for(var d=!1,b="",e=0;e<a.length;e++){var f=a[e];f!=="\\"||d?(b+=d||typeof c[f]==="undefined"?"["+f+"]":c[f],
d=!1):d=!0}return b}
function bookacti_convert_php_datetime_format_to_fc_date_formatting_object(a){if(typeof a!=="string"||!a.length)return{};for(var c={d:{day:"2-digit"},D:{weekday:"short"},j:{day:"numeric"},l:{weekday:"long"},N:{},w:{},W:{week:"numeric"},F:{month:"long"},m:{month:"2-digit"},M:{month:"short"},n:{month:"numeric"},o:{year:"numeric"},Y:{year:"numeric"},y:{year:"2-digit"},a:{meridiem:"lowercase"},A:{},g:{hour:"numeric",hour12:!0},G:{hour:"numeric",hour12:!1},h:{hour:"2-digit",hour12:!0},H:{hour:"2-digit",
hour12:!1},i:{minute:"2-digit"},s:{second:"2-digit"},u:{timeZoneName:"short"},e:{timeZoneName:"short"},O:{},P:{},T:{timeZoneName:"short"},c:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"},r:{year:"numeric",month:"short",day:"2-digit",weekday:"short",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"},U:{}},d={meridiem:!1},b=!1,e=0;e<a.length;e++){var f=a[e];f!=="\\"||b?(b||typeof c[f]==="undefined"||$j.extend(!0,d,c[f]),b=!1):b=!0}return d}
function bookacti_get_url_parameter(a,c){if(typeof c==="undefined")c=window.location.search.substring(1);else{var d=document.createElement("a");d.href=c;c=d.search.substring(1)}c=c.split("&");for(d=0;d<c.length;d++){var b=c[d].split("=");if(b[0]==a)return decodeURIComponent(b[1].replace(/\+/g,"%20"))}return""}function bookacti_is_url_external(a){var c=document.createElement("a");c.href=a;return c.host!==window.location.host}
function bookacti_format_price(a,c){if(!$j.isNumeric(a))return"";var d=parseFloat(a);c=typeof c!=="undefined"?c:{};$j.isPlainObject(c)||(c={});var b=$j.extend({currency_symbol:bookacti_localized.price_currency_symbol,decimal_separator:bookacti_localized.price_decimal_separator,thousand_separator:bookacti_localized.price_thousand_separator,decimals:bookacti_localized.price_decimal_number,price_format:bookacti_localized.price_format,plain_text:!0},c);$j("body").trigger("bookacti_formatted_price_args",
[b,c,a]);b.formatted_amount=bookacti_number_format(Math.abs(d),b.decimals,b.decimal_separator,b.thousand_separator);b.formatted_price="";b.plain_text?(d<0&&(b.formatted_price+="-"),b.formatted_price+=b.price_format.replace("%2$s",b.formatted_amount).replace("%1$s",b.currency_symbol)):(b.formatted_price+="<span class='bookacti-price'><bdi>",d<0&&(b.formatted_price+="<span class='bookacti-price-sign'>-</span>"),b.formatted_price+=b.price_format.replace("%2$s",'<span class="bookacti-price-amount">'+
b.formatted_amount+"</span>").replace("%1$s",'<span class="bookacti-price-currency-symbol">'+b.currency_symbol+"</span>"),b.formatted_price+="</bdi></span>");$j("body").trigger("bookacti_formatted_price",[b,a,c]);return b.formatted_price}
function bookacti_number_format(a,c,d,b){a=parseFloat(a);formatted_number=a.toFixed(parseInt(c));parseFloat(formatted_number).toString().indexOf(".")===-1&&(formatted_number=parseFloat(formatted_number));a=formatted_number.toString().split(".");a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,b);return formatted_number=a.join(d)}
function bookacti_get_string_between(a,c,d){typeof a==="string"||a instanceof String||(a="");typeof c==="string"||c instanceof String||(c="");typeof d==="string"||d instanceof String||(d="");var b=c!==""?a.indexOf(c):-1,e=!1;b<0&&(b=0,e=!0);b+=c.length;len=d!==""&&b<=a.length?a.indexOf(d,b):-1;var f=!1;len<0?(len=a.length,f=!0):len-=b;return c!==""&&e||d!==""&&f?"":a.substring(b,len)};
