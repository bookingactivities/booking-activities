$j(document).ready(function(){bookacti_init_user_selectbox();bookacti_init_moment_format_from_php_date_format()});window.addEventListener("touchstart",function bookacti_detect_touch_device(){bookacti.is_touch_device=true;window.removeEventListener("touchstart",bookacti_detect_touch_device)},false);function bookacti_pad(b,a){b=b.toString();return b.length<a?bookacti_pad("0"+b,a):b}function bookacti_compare_arrays(b,a){var c=$j(b).not(a).length===0&&$j(a).not(b).length===0;return c}$j.fn.serializeObject=function(){var a={};function d(g,i){if(g.length<1){return i}var f=g[0];if(f.slice(-1)=="]"){f=f.slice(0,-1)}var e={};if(g.length==1){e[f]=i}else{g.shift();var h=d(g,i);e[f]=h}return e}function c(e){var f=[];$j.each(e.serializeArray(),function(h,j){if(j.name.indexOf("[]")<0){f.push(j);return true}var i=j.name.split("[]")[0];var g=false;$j.each(f,function(k,l){if(l.name===i){g=true;f[k]["value"].push(j.value)}});if(!g){f.push({name:i,value:[j.value]})}});return f}var b=c(this);$j.each(b,function(){var f=this.value;var g=this.name.split("[");var e=d(g,f);$j.extend(true,a,e)});return a};function bookacti_init_user_selectbox(){(function(a){a.widget("custom.combobox",{_create:function(){this.wrapper=a("<span>").addClass("bookacti-combobox").insertAfter(this.element);this.element.hide();this._createAutocomplete();this._createShowAllButton()},_createAutocomplete:function(){var b=this.element.children(":selected"),c=b.val()?b.text():"";this.input=a("<input>").appendTo(this.wrapper).val(c).attr("title","").attr("placeholder",bookacti_localized.placeholder_select_customer).addClass("bookacti-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:a.proxy(this,"_source")}).tooltip({tooltipClass:"ui-state-highlight"});this._on(this.input,{autocompleteselect:function(d,e){e.item.option.selected=true;this._trigger("select",d,{item:e.item.option});a(this.element).trigger("bookacti_customers_selectbox_changed",[e.item.option])},autocompletechange:function(d,e){this._removeIfInvalid(d,e)}})},_createShowAllButton:function(){var b=this.input,c=false;a("<a>").attr("tabIndex",-1).attr("title",bookacti_localized.show_all_customers).tooltip().appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("bookacti-combobox-toggle ui-corner-right").mousedown(function(){c=b.autocomplete("widget").is(":visible")}).click(function(){b.focus();if(c){return}b.autocomplete("search","")})},_source:function(c,b){var d=new RegExp(a.ui.autocomplete.escapeRegex(c.term),"i");b(this.element.children("option").map(function(){var e=a(this).text();if(this.value&&(!c.term||d.test(e))){return{label:e,value:e,option:this}}}))},_removeIfInvalid:function(d,f){if(f.item){return}var e=this.input.val(),b=e.toLowerCase(),c=false;this.element.children("option").each(function(){if(a(this).text().toLowerCase()===b){this.selected=c=true;return false}});if(c){return}this.input.val("").attr("title",'"'+e+'" '+bookacti_localized.error_no_results).tooltip("open");this.element.val("");this._delay(function(){this.input.tooltip("close").attr("title","")},2500);this.input.autocomplete("instance").term=""},_destroy:function(){this.wrapper.remove();this.element.show()}})})(jQuery);$j(function(){$j(".bookacti-user-selectbox").combobox()})}function bookacti_init_moment_format_from_php_date_format(){(function(b){var a={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:function(){return"["+this.format("Do").replace(/\d*/g,"")+"]"},w:"d",z:function(){return this.format("DDD")-1},W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:function(){return this.daysInMonth()},L:function(){return this.isLeapYear()?1:0},o:"GGGG",Y:"YYYY",y:"YY",a:"a",A:"A",B:function(){var e=this.clone().utc(),d=((e.hours()+1)%24)+(e.minutes()/60)+(e.seconds()/3600);return Math.floor(d*1000/24)},g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"[u]",e:"[e]",I:function(){return this.isDST()?1:0},O:"ZZ",P:"Z",T:"[T]",Z:function(){return parseInt(this.format("ZZ"),10)*36},c:"YYYY-MM-DD[T]HH:mm:ssZ",r:"ddd, DD MMM YYYY HH:mm:ss ZZ",U:"X"},c=/[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g;moment.fn.formatPHP=function(e){var d=this;return this.format(e.replace(c,function(f){return typeof a[f]==="function"?a[f].call(d):a[f]}))}}(moment))};