$j(document).ready(function(){bookacti_select2_init();bookacti_select2_sortable_init();$j("body").on("select2:select",'.bookacti-select2-ajax[data-sortable="1"], .bookacti-select2-no-ajax[data-sortable="1"]',function(a){"undefined"!==typeof a.params&&"undefined"!==typeof a.params.data&&"undefined"!==typeof a.params.data.id&&(a=a.params.data.id,a=$j(this).find('option[value="'+a+'"]'),a.length&&(a.detach(),$j(this).append(a),$j(this).trigger("change")))});moment.locale(bookacti_localized.fullcalendar_locale);
bookacti_init_moment_format_from_php_date_format()});var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("testPassive",null,opts);window.removeEventListener("testPassive",null,opts)}catch(a){}window.addEventListener("touchstart",function bookacti_detect_touch_device(){bookacti.is_touch_device=!0;window.removeEventListener("touchstart",bookacti_detect_touch_device)},supportsPassive?{passive:!0}:!1);
function bookacti_init_tooltip(){"function"==typeof $j.fn.tipTip&&$j(".bookacti-tip").tipTip({attribute:"data-tip",fadeIn:200,fadeOut:200,delay:200,maxWidth:"300px",keepAlive:!0})}function bookacti_get_loading_html(){return'<div class="bookacti-loading-container"><div class="bookacti-loading-image"><div class="bookacti-spinner"></div></div><div class="bookacti-loading-text">'+bookacti_localized.loading+"</div></div>"}
function bookacti_add_loading_html(a,b){b=b?b:"append";var c=bookacti_get_loading_html();"before"===b?a.before(c):"after"===b?a.after(c):"prepend"===b?a.prepend(c):a.append(c)}function bookacti_remove_loading_html(a){a.find(".bookacti-loading-container").addBack(".bookacti-loading-container").remove()}
function bookacti_scroll_to(a,b,c){b=$j.isNumeric(b)?parseInt(b):500;c="middle"!==c?"top":"middle";var e="number"===typeof a?a:a.length?a.offset().top:$j(document).scrollTop(),d=e;"middle"===c&&"number"!==typeof a&&a.length&&(a=a.height(),c=$j(window).height(),a<c&&(d=e-(c/2-a/2)));$j("html, body").animate({scrollTop:d},b)}function bookacti_pad(a,b){a=a.toString();return a.length<b?bookacti_pad("0"+a,b):a}
function bookacti_compare_arrays(a,b){return 0===$j(a).not(b).length&&0===$j(b).not(a).length}
$j.fn.serializeObject=function(){function a(e,d){if(1>e.length)return d;var f=e[0];"]"==f.slice(-1)&&(f=f.slice(0,-1));var g={};1==e.length?g[f]=d:(e.shift(),e=a(e,d),g[f]=e);return g}var b={},c=function(e){var d=[];$j.each(e.serializeArray(),function(f,g){if(0>g.name.indexOf("[]"))return d.push(g),!0;var h=g.name.split("[]")[0],k=!1;$j.each(d,function(l,m){m.name===h&&(k=!0,d[l].value.push(g.value))});k||d.push({name:h,value:[g.value]})});return d}(this);$j.each(c,function(){var e=this.value,d=this.name.split("[");
e=a(d,e);$j.extend(!0,b,e)});return b};
function bookacti_select2_init(){$j.fn.select2&&($j(".bookacti-select2-no-ajax:not(.select2-hidden-accessible)").select2({language:bookacti_localized.fullcalendar_locale,containerCssClass:"bookacti-select2-selection",selectionCssClass:"bookacti-select2-selection",dropdownCssClass:"bookacti-select2-dropdown",minimumResultsForSearch:1,width:"element",dropdownAutoWidth:!0,dropdownParent:$j(this).closest(".bookacti-backend-dialog").length?$j(this).closest(".bookacti-backend-dialog"):$j("body"),escapeMarkup:function(a){return a}}),
$j(".bookacti-select2-ajax:not(.select2-hidden-accessible)").select2({language:bookacti_localized.fullcalendar_locale,containerCssClass:"bookacti-select2-selection",selectionCssClass:"bookacti-select2-selection",dropdownCssClass:"bookacti-select2-dropdown",minimumInputLength:3,width:"element",dropdownAutoWidth:!0,dropdownParent:$j(this).closest(".bookacti-backend-dialog").length?$j(this).closest(".bookacti-backend-dialog"):$j("body"),escapeMarkup:function(a){return a},ajax:{url:bookacti_localized.ajaxurl,
dataType:"json",delay:1E3,data:function(a){var b=$j(this).data("type")?$j(this).data("type").trim():"";a={term:a.term,action:b?"bookactiSelect2Query_"+b:"bookactiSelect2Query",name:$j(this).attr("name")?$j(this).attr("name"):"",id:$j(this).attr("id")?$j(this).attr("id"):"",allow_current:$j(this).find('option[value="current"]').length?1:0,nonce:bookacti_localized.nonce_query_select2_options};$j(this).trigger("bookacti_select2_query_data",[a]);return a},processResults:function(a){var b=[];"undefined"!==
typeof a.options&&(b=a.options);b={results:b};$j(this).trigger("bookacti_select2_query_results",[b,a]);return b},cache:!0}}))}
function bookacti_select2_sortable_init(a){"undefined"===typeof a&&(a='.select2-hidden-accessible[data-sortable="1"] + .select2-container .bookacti-select2-selection.select2-selection--multiple .select2-selection__rendered');$j(a).sortable({containment:"parent",items:".select2-selection__choice",update:function(b,c){var e=$j(c.item).parents(".select2-container").prev(".select2-hidden-accessible");e.length&&e.data("sortable")&&$j(c.item).parents(".select2-container").find(".select2-selection__choice").each(function(d,
f){d=!1;"undefined"!==typeof $j(f).data("data")&&"undefined"!==typeof $j(f).data("data").id&&(d=$j(f).data("data").id);if(!1===d)return!0;f=e.find('option[value="'+d+'"]');if(!f.length)return!0;f.detach();e.append(f)})}})}
function bookacti_init_moment_format_from_php_date_format(){(function(a){var b={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:function(){return"["+this.format("Do").replace(/\d*/g,"")+"]"},w:"d",z:function(){return this.format("DDD")-1},W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:function(){return this.daysInMonth()},L:function(){return this.isLeapYear()?1:0},o:"GGGG",Y:"YYYY",y:"YY",a:"a",A:"A",B:function(){var c=this.clone().utc();c=(c.hours()+1)%24+c.minutes()/60+c.seconds()/3600;return Math.floor(1E3*c/24)},
g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"[u]",e:"[e]",I:function(){return this.isDST()?1:0},O:"ZZ",P:"Z",T:"[T]",Z:function(){return 36*parseInt(this.format("ZZ"),10)},c:"YYYY-MM-DD[T]HH:mm:ssZ",r:"ddd, DD MMM YYYY HH:mm:ss ZZ",U:"X"};moment.fn.formatPHP=function(c){var e=this;escape=!1;return this.format(c.replace(/./g,function(d){return escape?(escape=!1,"["+d+"]"):"\\"===d?(escape=!0,""):"undefined"===typeof b[d]?"["+d+"]":"function"===typeof b[d]?b[d].call(e):b[d]}))}})(moment)}
function bookacti_convert_php_datetime_format_to_moment_js(a){if("string"!==typeof a||!a.length)return"";var b={d:"DD",D:"ddd",j:"D",S:"Do",l:"dddd",N:"E",w:"d",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",o:"GGGG",Y:"YYYY",y:"YY",a:"a",A:"A",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"X",e:"z",O:"ZZ",P:"Z",T:"z",c:"YYYY-MM-DD[T]HH:mm:ssZ",r:"ddd, DD MMM YYYY HH:mm:ss ZZ",U:"X"};a=a.replace("jS","S");for(var c=!1,e="",d=0;d<a.length;d++){var f=a[d];"\\"!==f||c?(e+=c||"undefined"===typeof b[f]?"["+f+"]":b[f],
c=!1):c=!0}return e}
function bookacti_convert_php_datetime_format_to_fc_date_formatting_object(a){if("string"!==typeof a||!a.length)return{};for(var b={d:{day:"2-digit"},D:{weekday:"short"},j:{day:"numeric"},l:{weekday:"long"},N:{},w:{},W:{week:"numeric"},F:{month:"long"},m:{month:"2-digit"},M:{month:"short"},n:{month:"numeric"},o:{year:"numeric"},Y:{year:"numeric"},y:{year:"2-digit"},a:{meridiem:"lowercase"},A:{},g:{hour:"numeric",hour12:!0},G:{hour:"numeric",hour12:!1},h:{hour:"2-digit",hour12:!0},H:{hour:"2-digit",
hour12:!1},i:{minute:"2-digit"},s:{second:"2-digit"},u:{timeZoneName:"short"},e:{timeZoneName:"short"},O:{},P:{},T:{timeZoneName:"short"},c:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"},r:{year:"numeric",month:"short",day:"2-digit",weekday:"short",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"},U:{}},c={meridiem:!1},e=!1,d=0;d<a.length;d++){var f=a[d];"\\"!==f||e?(e||"undefined"===typeof b[f]||$j.extend(!0,c,b[f]),e=!1):e=!0}return c}
function bookacti_get_url_parameter(a){for(var b=window.location.search.substring(1).split("&"),c=0;c<b.length;c++){var e=b[c].split("=");if(e[0]==a)return decodeURIComponent(e[1].replace(/\+/g,"%20"))}return""}
function bookacti_format_price(a){var b="";if(!$j.isNumeric(a))return b;a=parseFloat(a);var c=0>a;c&&(a*=-1);b=a.toFixed(parseInt(bookacti_localized.price_decimal_number));-1===parseFloat(b).toString().indexOf(".")&&(b=parseFloat(b));a=b.toString().split(".");a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,bookacti_localized.price_thousand_separator);b=a.join(bookacti_localized.price_decimal_separator);b=bookacti_localized.price_format.replace("{price}",b);c&&(b="-"+b);return b};
