$j(document).ready(function(){bookacti_select2_init();$j("body").on("select2:select",'.bookacti-select2-ajax[data-sortable="1"], .bookacti-select2-no-ajax[data-sortable="1"]',function(a){"undefined"!==typeof a.params&&"undefined"!==typeof a.params.data&&"undefined"!==typeof a.params.data.id&&(a=a.params.data.id,a=$j(this).find('option[value="'+a+'"]'),a.length&&(a.detach(),$j(this).append(a),$j(this).trigger("change")))});bookacti_init_jquery_ui_dialogs();$j("body").on("click",".ui-widget-overlay",
function(){$j(".bookacti-backend-dialog:ui-dialog:visible").dialog("close")});$j("body").on("keydown",".bookacti-backend-dialog",function(a){if(!$j("textarea").is(":focus")&&a.keyCode==$j.ui.keyCode.ENTER)return $j(this).parent().find(".ui-dialog-buttonpane button:first").focus(),!1});moment.locale(bookacti_localized.fullcalendar_locale);bookacti_init_moment_format_from_php_date_format();$j("body").on("keypress",'.bookacti-input[type="number"]:not([step=""]), .bookacti-input.bookacti-duration-field',
function(a){var b=$j(this).attr("step");"undefined"!==typeof a.charCode&&($j.isNumeric(b)&&Math.floor(b)!=b||48<=a.charCode&&57>=a.charCode||13==a.charCode||a.preventDefault())})});var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("testPassive",null,opts);window.removeEventListener("testPassive",null,opts)}catch(a){}
window.addEventListener("touchstart",function bookacti_detect_touch_device(){bookacti.is_touch_device=!0;window.removeEventListener("touchstart",bookacti_detect_touch_device)},supportsPassive?{passive:!0}:!1);function bookacti_init_tooltip(){"function"==typeof $j.fn.tipTip&&$j(".bookacti-tip").tipTip({attribute:"data-tip",fadeIn:200,fadeOut:200,delay:200,maxWidth:"300px",keepAlive:!0})}
function bookacti_init_jquery_ui_dialogs(a){"undefined"===typeof a&&(a=".bookacti-backend-dialog");$j(a).dialog({modal:!0,autoOpen:!1,minHeight:300,minWidth:460,resize:"auto",show:!0,hide:!0,dialogClass:"bookacti-dialog",beforeClose:function(){if(bookacti_localized.is_admin&&"undefined"!==typeof bookacti_empty_all_dialog_forms){var b=$j(this).attr("id");b&&(a="#"+b);bookacti_empty_all_dialog_forms(a)}}})}
function bookacti_get_loading_html(){return'<div class="bookacti-loading-container"><div class="bookacti-loading-image"><div class="bookacti-spinner"></div></div><div class="bookacti-loading-text">'+bookacti_localized.loading+"</div></div>"}function bookacti_add_loading_html(a,b){b=b?b:"append";var d=bookacti_get_loading_html();"before"===b?a.before(d):"after"===b?a.after(d):"prepend"===b?a.prepend(d):a.append(d)}
function bookacti_remove_loading_html(a){a.find(".bookacti-loading-container").addBack(".bookacti-loading-container").remove()}function bookacti_scroll_to(a,b,d){b=$j.isNumeric(b)?parseInt(b):500;d="middle"!==d?"top":"middle";var c="number"===typeof a?a:a.length?a.offset().top:$j(document).scrollTop(),e=c;"middle"===d&&"number"!==typeof a&&a.length&&(a=a.height(),d=$j(window).height(),a<d&&(e=c-(d/2-a/2)));$j("html, body").animate({scrollTop:e},b)}
function bookacti_pad(a,b){a=a.toString();return a.length<b?bookacti_pad("0"+a,b):a}function bookacti_compare_arrays(a,b){return 0===$j(a).not(b).length&&0===$j(b).not(a).length}
function bookacti_serialize_object(a){function b(c,e){if(1>c.length)return e;var f=c[0];"]"==f.slice(-1)&&(f=f.slice(0,-1));var g={};1==c.length?g[f]=e:(c.shift(),c=b(c,e),g[f]=c);return g}var d={};a=function(c){var e=[];$j.each(c.serializeArray(),function(f,g){if(0>g.name.indexOf("[]"))return e.push(g),!0;var h=g.name.split("[]")[0],k=!1;$j.each(e,function(l,m){m.name===h&&(k=!0,e[l].value.push(g.value))});k||e.push({name:h,value:[g.value]})});return e}(a);$j.each(a,function(){var c=this.value,e=
this.name.split("[");c=b(e,c);$j.extend(!0,d,c)});return d}
function bookacti_select2_init(){if($j.fn.select2){var a={language:bookacti_localized.fullcalendar_locale,containerCssClass:"bookacti-select2-selection",selectionCssClass:"bookacti-select2-selection",dropdownCssClass:"bookacti-select2-dropdown",minimumResultsForSearch:1,minimumInputLength:0,width:"element",dropdownAutoWidth:!0,dropdownParent:$j(this).closest(".bookacti-backend-dialog").length?$j(this).closest(".bookacti-backend-dialog"):$j("body"),escapeMarkup:function(b){return b}};$j("body").trigger("bookacti_select2_init_data",
[a]);$j(".bookacti-select2-no-ajax:not(.select2-hidden-accessible)").select2(a);$j(".bookacti-select2-ajax:not(.select2-hidden-accessible)").select2($j.extend(!0,a,{minimumResultsForSearch:0,ajax:{url:bookacti_localized.ajaxurl,dataType:"json",delay:1E3,data:function(b){var d=$j(this).data("type")?$j(this).data("type").trim():"",c=[];$j(this).find("option").each(function(){""!==$j(this).val()&&c.push({id:$j(this).val(),text:$j(this).text()})});b={action:d?"bookactiSelect2Query_"+d:"bookactiSelect2Query",
term:"string"==typeof b.term?b.term:"",options:c,name:$j(this).attr("name")?$j(this).attr("name"):"",id:$j(this).attr("id")?$j(this).attr("id"):"",nonce:bookacti_localized.nonce_query_select2_options};$j(this).trigger("bookacti_select2_query_data",[b]);return b},processResults:function(b){var d={results:"undefined"!==typeof b.options?b.options:[]};$j(this).trigger("bookacti_select2_query_results",[d,b]);return d},transport:function(b,d,c){if(b.data.term.length>=Math.max(a.minimumInputLength,3)){var e=
$j.ajax(b);e.then(d);e.fail(c)}else e={abort:function(){}},d({options:b.data.options});return e},cache:!0}}));$j("body").on("select2:open",".bookacti-select2-ajax",function(){$j("input.select2-search__field").attr("placeholder",bookacti_localized.select2_search_placeholder.replace("{nb}",Math.max(a.minimumInputLength,3)))});bookacti_select2_sortable_init()}}
function bookacti_select2_sortable_init(a){"undefined"===typeof a&&(a='.select2-hidden-accessible[data-sortable="1"] + .select2-container .bookacti-select2-selection.select2-selection--multiple .select2-selection__rendered');$j(a).length&&$j(a).sortable({containment:"parent",items:".select2-selection__choice",update:function(b,d){var c=$j(d.item).parents(".select2-container").prev(".select2-hidden-accessible");c.length&&c.data("sortable")&&$j(d.item).parents(".select2-container").find(".select2-selection__choice").each(function(e,
f){e=!1;"undefined"!==typeof $j(f).data("data")&&"undefined"!==typeof $j(f).data("data").id&&(e=$j(f).data("data").id);if(!1===e)return!0;f=c.find('option[value="'+e+'"]');if(!f.length)return!0;f.detach();c.append(f)})}})}
function bookacti_init_moment_format_from_php_date_format(){(function(a){var b={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:function(){return"["+this.format("Do").replace(/\d*/g,"")+"]"},w:"d",z:function(){return this.format("DDD")-1},W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:function(){return this.daysInMonth()},L:function(){return this.isLeapYear()?1:0},o:"GGGG",Y:"YYYY",y:"YY",a:"a",A:"A",B:function(){var d=this.clone().utc();d=(d.hours()+1)%24+d.minutes()/60+d.seconds()/3600;return Math.floor(1E3*d/24)},
g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"[u]",e:"[e]",I:function(){return this.isDST()?1:0},O:"ZZ",P:"Z",T:"[T]",Z:function(){return 36*parseInt(this.format("ZZ"),10)},c:"YYYY-MM-DD[T]HH:mm:ssZ",r:"ddd, DD MMM YYYY HH:mm:ss ZZ",U:"X"};moment.fn.formatPHP=function(d){var c=this;escape=!1;return this.format(d.replace(/./g,function(e){return escape?(escape=!1,"["+e+"]"):"\\"===e?(escape=!0,""):"undefined"===typeof b[e]?"["+e+"]":"function"===typeof b[e]?b[e].call(c):b[e]}))}})(moment)}
function bookacti_convert_php_datetime_format_to_moment_js(a){if("string"!==typeof a||!a.length)return"";var b={d:"DD",D:"ddd",j:"D",S:"Do",l:"dddd",N:"E",w:"d",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",o:"GGGG",Y:"YYYY",y:"YY",a:"a",A:"A",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"X",e:"z",O:"ZZ",P:"Z",T:"z",c:"YYYY-MM-DD[T]HH:mm:ssZ",r:"ddd, DD MMM YYYY HH:mm:ss ZZ",U:"X"};a=a.replace("jS","S");for(var d=!1,c="",e=0;e<a.length;e++){var f=a[e];"\\"!==f||d?(c+=d||"undefined"===typeof b[f]?"["+f+"]":b[f],
d=!1):d=!0}return c}
function bookacti_convert_php_datetime_format_to_fc_date_formatting_object(a){if("string"!==typeof a||!a.length)return{};for(var b={d:{day:"2-digit"},D:{weekday:"short"},j:{day:"numeric"},l:{weekday:"long"},N:{},w:{},W:{week:"numeric"},F:{month:"long"},m:{month:"2-digit"},M:{month:"short"},n:{month:"numeric"},o:{year:"numeric"},Y:{year:"numeric"},y:{year:"2-digit"},a:{meridiem:"lowercase"},A:{},g:{hour:"numeric",hour12:!0},G:{hour:"numeric",hour12:!1},h:{hour:"2-digit",hour12:!0},H:{hour:"2-digit",
hour12:!1},i:{minute:"2-digit"},s:{second:"2-digit"},u:{timeZoneName:"short"},e:{timeZoneName:"short"},O:{},P:{},T:{timeZoneName:"short"},c:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"},r:{year:"numeric",month:"short",day:"2-digit",weekday:"short",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"},U:{}},d={meridiem:!1},c=!1,e=0;e<a.length;e++){var f=a[e];"\\"!==f||c?(c||"undefined"===typeof b[f]||$j.extend(!0,d,b[f]),c=!1):c=!0}return d}
function bookacti_get_url_parameter(a,b){if("undefined"===typeof b)b=window.location.search.substring(1);else{var d=document.createElement("a");d.href=b;b=d.search.substring(1)}b=b.split("&");for(d=0;d<b.length;d++){var c=b[d].split("=");if(c[0]==a)return decodeURIComponent(c[1].replace(/\+/g,"%20"))}return""}function bookacti_is_url_external(a){var b=document.createElement("a");b.href=a;return b.host!==window.location.host}
function bookacti_format_price(a,b){if(!$j.isNumeric(a))return"";var d=parseFloat(a);b="undefined"!==typeof b?b:{};$j.isPlainObject(b)||(b={});var c=$j.extend({currency_symbol:bookacti_localized.price_currency_symbol,decimal_separator:bookacti_localized.price_decimal_separator,thousand_separator:bookacti_localized.price_thousand_separator,decimals:bookacti_localized.price_decimal_number,price_format:bookacti_localized.price_format,plain_text:!0},b);$j("body").trigger("bookacti_formatted_price_args",
{args:c,args_raw:b,price_raw:a});c.formatted_amount=bookacti_number_format(Math.abs(d),c.decimals,c.decimal_separator,c.thousand_separator);c.formatted_price="";c.plain_text?(0>d&&(c.formatted_price+="-"),c.formatted_price+=c.price_format.replace("%2$s",c.formatted_amount).replace("%1$s",c.currency_symbol)):(c.formatted_price+="<span class='bookacti-price'><bdi>",0>d&&(c.formatted_price+="<span class='bookacti-price-sign'>-</span>"),c.formatted_price+=c.price_format.replace("%2$s",'<span class="bookacti-price-amount">'+
c.formatted_amount+"</span>").replace("%1$s",'<span class="bookacti-price-currency-symbol">'+c.currency_symbol+"</span>"),c.formatted_price+="</bdi></span>");$j("body").trigger("bookacti_formatted_price",{args:c,price_raw:a,args_raw:b});return c.formatted_price}
function bookacti_number_format(a,b,d,c){a=parseFloat(a);formatted_number=a.toFixed(parseInt(b));-1===parseFloat(formatted_number).toString().indexOf(".")&&(formatted_number=parseFloat(formatted_number));a=formatted_number.toString().split(".");a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,c);return formatted_number=a.join(d)};
