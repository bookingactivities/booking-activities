$j(document).ready(function(){$j(".qtranxs-translatable").on("keyup",function(){bookacti_update_qtx_field(this)});$j(".bookacti-tabs").tabs();$j(".bookacti-show-hide-advanced-options").on("click",function(c){bookacti_show_hide_advanced_options($j(this))});$j(".bookacti-multiple-select-container").on("change",".bookacti-multiple-select",function(){bookacti_switch_select_to_multiple(this)});if($j("#_bookacti_template").length){var b=$j("#_bookacti_template").val();var a=$j("[data-bookacti-show-if-templates]");bookacti_show_hide_template_related_options(b,a)}$j("#_bookacti_template").on("change",function(){var d=$j(this).val();var c=$j("[data-bookacti-show-if-templates]");bookacti_show_hide_template_related_options(d,c)});bookacti_init_tooltip();$j("#bookacti-dismiss-5stars-rating").on("click",function(){bookacti_dismiss_5stars_rating_notice()})});function bookacti_show_hide_advanced_options(a){a.closest("form").find(".bookacti-hidden-field").toggle();a.toggleClass("bookacti-show-advanced-options bookacti-hide-advanced-options");if(a.hasClass("bookacti-show-advanced-options")){a.html(a.data("show-title"))}else{if(a.hasClass("bookacti-hide-advanced-options")){a.html(a.data("hide-title"))}}}function bookacti_init_add_and_remove_items(){$j(".bookacti-items-container").on("click",".bookacti-add-items",function(d){var c=$j(this).parents(".bookacti-items-container");var b=c.find(".bookacti-add-new-items-select-box").is("[multiple]");var f=c.find(".bookacti-add-new-items-select-box").val();var a=f;if(!b){a=[f]}$j.each(a,function(g,e){c.find('.bookacti-add-new-items-select-box option[value="'+e+'"]').clone().appendTo(c.find(".bookacti-items-select-box"));c.find('.bookacti-add-new-items-select-box option[value="'+e+'"]').hide().attr("disabled",true);c.find(".bookacti-add-new-items-select-box").val(c.find(".bookacti-add-new-items-select-box option:enabled:first").val())})});$j(".bookacti-items-container").on("click",".bookacti-remove-items",function(g){var d=$j(this).parents(".bookacti-items-container");var c=d.data("type");var f="";if(c==="users"){f=bookacti_localized.current_user_id}else{if(c==="templates"){f=bookacti.selected_template}}var b=d.find(".bookacti-items-select-box").is("[multiple]");var h=d.find(".bookacti-items-select-box").val();var a=h;if(!b){a=[h]}$j.each(a,function(j,e){if(e!=f){d.find('.bookacti-items-select-box option[value="'+e+'"]').remove();d.find('.bookacti-add-new-items-select-box option[value="'+e+'"]').show().attr("disabled",false);d.find(".bookacti-add-new-items-select-box").val(e)}})})}function bookacti_init_tooltip(){$j(".bookacti-tip").tooltip({items:"[data-tip]",content:function(){return $j(this).data("tip")},show:{effect:"fadeIn",duration:200},hide:{effect:"fadeOut",duration:200},close:function(a,b){b.tooltip.hover(function(){$j(this).stop(true).fadeTo(200,1)},function(){$j(this).fadeOut("200",function(){$j(this).remove()})})}});$j(".bookacti-tip").tooltip("close")}function bookacti_empty_all_dialog_forms(a){a=typeof a==="undefined"||!a?".bookacti-backend-dialog ":a+" ";$j(a+".bookacti-form-error").remove();$j(a+'input[type="hidden"]:not([name^="nonce"]):not([name="_wp_http_referer"])').val("");$j(a+'input[type="text"]').val("");$j(a+'input[type="number"]').val("");$j(a+'input[type="date"]').val("");$j(a+"textarea").val("");$j(a+'input[type="color"]').val("#3a87ad");$j(a+'input[type="checkbox"]').prop("checked",false);$j(a+'input[type="radio"]').prop("checked",false);$j(a+"option").prop("selected",false);$j(a+".exception").remove();$j(a+"select.bookacti-add-new-items-select-box option").show().attr("disabled",false);$j(a+"select.bookacti-items-select-box option").remove();if(typeof tinyMCE!=="undefined"){if(tinyMCE){$j(a+"textarea.wp-editor-area").each(function(){var b=$j(this).attr("id");if(tinyMCE.get(b)){tinyMCE.get(b).setContent("")}})}}if($j(a+".bookacti-multiple-select").length){$j(a+".bookacti-multiple-select").each(function(){bookacti_switch_select_to_multiple(this)})}}function bookacti_fill_fields_from_array(a,c,b){c=c||"";b=typeof b==="undefined"||!b?"":b+" ";$j.each(a,function(e,g){var f=c?c+"["+e+"]":e;if($j.isPlainObject(g)){bookacti_fill_fields_from_array(g,f,b);return true}if($j(b+'input[type="checkbox"][name="'+f+'[]"]').length||$j(b+'input[type="checkbox"][name="'+f+'"]').length){if($j.isArray(g)){$j(b+'input[type="checkbox"][name="'+f+'[]"]').prop("checked",false);$j.each(g,function(k,j){$j(b+'input[type="checkbox"][name="'+f+'[]"][value="'+j+'"]').prop("checked",true)})}else{if(g==1){$j(b+'input[type="checkbox"][name="'+f+'"]').prop("checked",true)}else{$j(b+'input[type="checkbox"][name="'+f+'"]').prop("checked",false)}}}else{if($j(b+'input[name="'+f+'"]').is(":radio")){$j(b+'input[name="'+f+'"][value="'+g+'"]').prop("checked",true)}else{if($j(b+'select[name="'+f+'"]').length){$j(b+'select[name="'+f+'"] option[value="'+g+'"]').prop("selected",true);$j(b+'select[name="'+f+'"]').trigger("change");if($j(b+'select[name="'+f+'"].bookacti-user-selectbox').length){var d=$j(b+'select[name="'+f+'"].bookacti-user-selectbox option:selected').html();$j(b+'select[name="'+f+'"].bookacti-user-selectbox').siblings(".bookacti-combobox").find(".bookacti-combobox-input").val(d)}}else{if($j(b+'select[name="'+f+'[]"]').length){$j.each(g,function(j,k){$j(b+'select[name="'+f+'[]"] option[value="'+k+'"]').prop("selected",true)});$j(b+'select[name="'+f+'[]"]').trigger("change")}else{if($j(b+'input[name="'+f+'"]').attr("type")==="time"&&g==="24:00"){g="00:00"}$j(b+'input[name="'+f+'"]').val(g);$j(b+'textarea[name="'+f+'"]').val(g);if(typeof tinyMCE!=="undefined"){if(tinyMCE&&$j(b+'textarea[name="'+f+'"]').hasClass("wp-editor-area")){var h=$j(b+'textarea[name="'+f+'"]').attr("id");if(tinyMCE.get(h)){tinyMCE.get(h).setContent(g)}}}}}}}})}function bookacti_switch_select_to_multiple(c){var d=$j(c).data("select-id");var b=$j("select#"+d).attr("name");var a=$j(c).is(":checked");$j("select#"+d).prop("multiple",a);$j("select#"+d+' option[value="all"]').prop("disabled",a);$j("select#"+d+' option[value="none"]').prop("disabled",a);$j("select#"+d+' option[value="parent"]').prop("disabled",a);$j("select#"+d+' option[value="site"]').prop("disabled",a);$j("select#"+d+" option:disabled:selected").prop("selected",false);$j("select#"+d+" option:not(:visible):selected").prop("selected",false);if(a&&b.indexOf("[]")<0){$j("select#"+d).attr("name",b+"[]");$j(c).parents(".bookacti-multiple-select-container").find("label span.dashicons").removeClass("dashicons-plus").addClass("dashicons-minus")}else{$j("select#"+d).attr("name",b.replace("[]",""));$j(c).parents(".bookacti-multiple-select-container").find("label span.dashicons").removeClass("dashicons-minus").addClass("dashicons-plus")}}function bookacti_show_hide_template_related_options(b,a){var c=[];if($j.isNumeric(b)){b=[b]}a.removeClass("bookacti-hide-fields");a.each(function(){var f=$j(this);var e=f.data("bookacti-show-if-templates").toString();if(e.indexOf(",")>=0){e=e.split(",")}else{e=[e]}var d=true;$j.each(b,function(h,g){if($j.inArray(g.toString(),e)>=0){d=false}});if(d){if(f.is(":selected")){c.push(f)}f.addClass("bookacti-hide-fields")}});$j.each(c,function(d,e){e.removeAttr("selected");e.siblings("option:not(.bookacti-hide-fields):not(:disabled):first").prop("selected",true)})}function bookacti_update_qtx_field(b){if(typeof qTranslateConfig!=="undefined"){var a=qTranslateConfig.js.get_qtx();var c=a.getActiveLanguage();var d=$j(b).attr("name");if(c!==undefined){$j('input[name="qtranslate-fields['+d+"]["+c+']"]').val($j(b).val())}}}function bookacti_refresh_qtx_field(b){if(typeof qTranslateConfig!=="undefined"){var a=qTranslateConfig.js.get_qtx();$j(b).removeClass("qtranxs-translatable");a.refreshContentHook(b);$j(b).addClass("qtranxs-translatable")}}function bookacti_dismiss_5stars_rating_notice(){$j(".bookacti-5stars-rating-notice").remove();$j.ajax({url:ajaxurl,type:"POST",data:{action:"bookactiDismiss5StarsRatingNotice",nonce:bookacti_localized.nonce_dismiss_5stars_rating_notice},dataType:"json",success:function(b){if(b.status==="failed"){var a=bookacti_localized.error_update_settings;if(b.error==="not_allowed"){a+="\n"+bookacti_localized.error_not_allowed}console.log(a);console.log(b)}},error:function(a){console.log(a)},complete:function(){}})};