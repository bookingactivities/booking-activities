function bookacti_init_template_dialogs(){$j(".bookacti-template-dialog").dialog({modal:true,autoOpen:false,minHeight:300,minWidth:520,resize:"auto",show:true,hide:true,dialogClass:"bookacti-dialog",closeText:"&#10006;",beforeClose:function(){var b=".bookacti-template-dialog";var a=$j(this).attr("id");if(a){b="#"+a}bookacti_empty_all_dialog_forms(b)}});$j("body").on("click",".ui-widget-overlay",function(){$j("div:ui-dialog:visible").dialog("close")});$j(".bookacti-template-dialog").on("keydown",function(a){if(!$j("textarea").is(":focus")&&a.keyCode==$j.ui.keyCode.ENTER){$j(this).parent().find(".ui-dialog-buttonpane button:first").focus();return false}});$j("#bookacti-unbind-booked-event-dialog").dialog({beforeClose:function(){}});bookacti_init_add_and_remove_items();$j("select#template-import-bound-activities").on("change",function(){bookacti_load_activities_bound_to_template($j("select#template-import-bound-activities").val())});$j("#bookacti-template-container").on("click","#bookacti-insert-template, #bookacti-add-first-template-button",function(){bookacti_dialog_add_new_template()});$j("#bookacti-template-duplicated-template-id").on("change",function(){var e=parseInt($j(this).val());if(!e){return}var b=parseInt($j("#bookacti-template-picker").val());var c=bookacti.booking_system["bookacti-template-calendar"]["template_data"];var a=$j('#bookacti-template-picker option[value="'+e+'"]').data("template-start");var d=$j('#bookacti-template-picker option[value="'+e+'"]').data("template-end");if(a){$j("#bookacti-template-opening").val(a)}if(d){$j("#bookacti-template-closing").val(d)}if(!$j.isEmptyObject(c.settings)&&b===e){bookacti_fill_fields_from_array(c.settings,"templateOptions")}else{$j("#bookacti-template-opening").val(moment.utc().locale("en").format("YYYY-MM-DD"));$j("#bookacti-template-closing").val(moment.utc().add(7,"days").locale("en").format("YYYY-MM-DD"));$j("#bookacti-mintime").val("00:00");$j("#bookacti-maxtime").val("00:00");$j("#bookacti-snapduration").val("00:05");$j("#bookacti-template-availability-period-start").val(0);$j("#bookacti-template-availability-period-end").val(0);$j("#bookacti-template-data-dialog").trigger("bookacti_default_template_settings")}});$j("#bookacti-template-activity-list").on("click",".activity-gear",function(){var a=$j(this).data("activity-id");bookacti_dialog_update_activity(a)});$j("#bookacti-template-groups-of-events-container").on("click","#bookacti-template-add-first-group-of-events-button, #bookacti-insert-group-of-events",function(){bookacti_dialog_create_group_of_events()});$j(document).on("keydown",function(a){if(a.ctrlKey&&a.keyCode==71){a.preventDefault();a.stopPropagation();if(bookacti.booking_system["bookacti-template-calendar"]["selected_events"].length>=2){bookacti_dialog_create_group_of_events()}}});$j("#bookacti-template-groups-of-events-container").on("click",".bookacti-update-group-of-events",function(){var a=$j(this).parents(".bookacti-group-of-events").data("group-id");var c=$j(this).parents(".bookacti-group-of-events").hasClass("bookacti-selected-group");var b=c;if(!c){b=bookacti_select_events_of_group(a)}if(b){bookacti_dialog_update_group_of_events(a)}});$j("#bookacti-group-categories").on("click",".bookacti-update-group-category",function(){var a=$j(this).parents(".bookacti-group-category").data("group-category-id");bookacti_dialog_update_group_category(a)});$j(".bookacti-template-dialog form").on("submit",function(a){a.preventDefault()});$j("#bookacti-group-of-events-category-selectbox").on("change blur",function(){if($j(this).val()==="new"){$j("#bookacti-group-of-events-new-category-title").show()}else{$j("#bookacti-group-of-events-new-category-title").hide()}})}function bookacti_dialog_add_new_template(){var a=$j.trim($j("#bookacti-template-data-dialog").dialog("option","title").replace(/\(.*?\)/,""));$j("#bookacti-template-data-dialog").dialog({title:a+" ("+bookacti_localized.create_new+")"});$j("#bookacti-template-opening").val(moment.utc().locale("en").format("YYYY-MM-DD"));$j("#bookacti-template-closing").val(moment.utc().add(1,"year").locale("en").format("YYYY-MM-DD"));$j("#bookacti-mintime").val("00:00");$j("#bookacti-maxtime").val("00:00");$j("#bookacti-snapduration").val("00:05");$j("#bookacti-template-availability-period-start").val(0);$j("#bookacti-template-availability-period-end").val(0);$j("#bookacti-template-data-dialog").trigger("bookacti_default_template_settings");if($j("#bookacti-template-duplicated-template-id option").length>1){$j("#bookacti-duplicate-template-fields").show();$j("#bookacti-template-duplicated-template-id").attr("disabled",false)}else{$j("#bookacti-duplicate-template-fields").hide();$j("#bookacti-template-duplicated-template-id").attr("disabled",true)}$j("#bookacti-template-data-dialog").trigger("bookacti_template_data_dialog");$j("#bookacti-template-data-dialog").dialog("open");$j("#bookacti-template-data-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_ok,click:function(){$j("#bookacti-template-data-form-action").val("bookactiInsertTemplate");$j("#bookacti-template-data-form select[multiple].bookacti-items-select-box option").prop("selected",true);var e=$j("#bookacti-template-title").val();var f=$j("#bookacti-template-opening").val()?moment.utc($j("#bookacti-template-opening").val(),["MM-DD-YYYY","DD-MM-YYYY","YYYY-MM-DD"]).locale("en").format("YYYY-MM-DD"):moment.utc().locale("en").format("YYYY-MM-DD");var b=$j("#bookacti-template-closing").val()?moment.utc($j("#bookacti-template-closing").val(),["MM-DD-YYYY","DD-MM-YYYY","YYYY-MM-DD"]).locale("en").format("YYYY-MM-DD"):"2037-12-31";if(typeof tinyMCE!=="undefined"){if(tinyMCE){tinyMCE.triggerSave()}}var d=bookacti_validate_template_form();if(d){var c=$j("#bookacti-template-data-form").serializeObject();if($j("#bookacti-template-calendar").length){bookacti_start_template_loading()}else{if($j("#bookacti-add-first-template-button").length){$j("#bookacti-add-first-template-button").removeClass("dashicons dashicons-plus-alt").addClass("spinner")}}$j("#bookacti-template-data-dialog").trigger("bookacti_insert_template_before",[c]);$j.ajax({url:ajaxurl,data:c,type:"POST",dataType:"json",success:function(g){if(g.status==="success"){if($j("#bookacti-first-template-container").length){$j("#bookacti-first-template-container").before($j('<div id="bookacti-template-calendar" ></div>'));$j("#bookacti-first-template-container").hide();$j(".bookacti-no-template").removeClass("bookacti-no-template");bookacti_load_template_calendar($j("#bookacti-template-calendar"));bookacti_start_template_loading()}$j("#bookacti-template-picker").append("<option value='"+g.template_id+"' data-template-start='"+f+"' data-template-end='"+b+"' >"+e+"</option>");$j("select.bookacti-template-select-box").append("<option value='"+g.template_id+"' >"+e+"</option>");if($j("#bookacti-template-picker option").length===2){bookacti_bind_template_dialogs()}$j("#bookacti-template-data-dialog").trigger("bookacti_template_inserted",[g,c]);bookacti_switch_template(g.template_id)}else{if(g.status==="failed"){var h=typeof g.message!=="undefined"?g.message:bookacti_localized.error;alert(h);console.log(h);console.log(g)}}},error:function(g){alert("AJAX "+bookacti_localized.error);console.log(g)},complete:function(){if($j("#bookacti-add-first-template-button").length){$j("#bookacti-add-first-template-button").removeClass("spinner").addClass("dashicons dashicons-plus-alt")}bookacti_stop_template_loading()}});$j(this).dialog("close")}}}])}function bookacti_dialog_update_template(a){if(!a){return false}var d=$j.trim($j("#bookacti-template-data-dialog").dialog("option","title").replace(/\(.*?\)/,""));$j("#bookacti-template-data-dialog").dialog({title:d+" ("+bookacti_localized.edit_id+": "+a+")"});$j("#bookacti-duplicate-template-fields").hide();$j("#bookacti-template-duplicated-template-id").attr("disabled",true);var b=bookacti.booking_system["bookacti-template-calendar"]["template_data"];$j("#bookacti-template-title").val(b.title);$j("#bookacti-template-opening").val(b.start);$j("#bookacti-template-closing").val(b.end);if(b.admin.length){var c=$j("#bookacti-template-managers-container");bookacti_fill_items_selectbox(c,b.admin)}$j("#bookacti-template-data-dialog").trigger("bookacti_default_template_settings");if(!$j.isEmptyObject(b.settings)){bookacti_fill_fields_from_array(b.settings,"templateOptions")}$j("#bookacti-template-data-dialog").trigger("bookacti_template_data_dialog",[a]);$j("#bookacti-template-data-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_ok,click:function(){$j("#bookacti-template-data-form-template-id").val(a);$j("#bookacti-template-data-form-action").val("bookactiUpdateTemplate");$j("#bookacti-template-data-form select[multiple].bookacti-items-select-box option").prop("selected",true);if(typeof tinyMCE!=="undefined"){if(tinyMCE){tinyMCE.triggerSave()}}var f=bookacti_validate_template_form();if(!f){return}var e=$j("#bookacti-template-data-form").serializeObject();$j("#bookacti-template-data-dialog").trigger("bookacti_update_template_before",[e]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:e,type:"POST",dataType:"json",success:function(g){if(g.status==="success"){bookacti.booking_system["bookacti-template-calendar"]["template_data"]=g.template_data;bookacti.booking_system["bookacti-template-calendar"]["start"]=g.template_data.start+" 00:00:00";bookacti.booking_system["bookacti-template-calendar"]["end"]=g.template_data.end+" 23:59:59";bookacti.booking_system["bookacti-template-calendar"]["display_data"]=g.template_data.settings;$j("#bookacti-template-picker option[value="+a+"]").html(g.template_data.title);$j("#bookacti-template-picker option[value="+a+"]").data("template-start",g.template_data.start);$j("#bookacti-template-picker option[value="+a+"]").data("template-end",g.template_data.end);$j("#bookacti-template-picker option[value="+a+"]").attr("data-template-start",g.template_data.start);$j("#bookacti-template-picker option[value="+a+"]").attr("data-template-end",g.template_data.end);var h=$j("#bookacti-template-calendar").fullCalendar("clientEvents");$j("#bookacti-template-calendar").replaceWith('<div id="bookacti-template-calendar" class="bookacti-calendar"></div>');bookacti_load_template_calendar($j("#bookacti-template-calendar"));$j("#bookacti-template-calendar").fullCalendar("addEventSource",h);$j("#bookacti-template-data-dialog").trigger("bookacti_template_updated",[g,e])}else{var i=typeof g.message!=="undefined"?g.message:bookacti_localized.error;alert(i);console.log(i);console.log(g)}},error:function(g){alert("AJAX "+bookacti_localized.error);console.log(g)},complete:function(){bookacti_stop_template_loading()}});$j(this).dialog("close")}},{text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button bookacti-dialog-left-button",click:function(){bookacti_dialog_deactivate_template(a)}}]);$j("#bookacti-template-data-dialog").dialog("open")}function bookacti_dialog_deactivate_template(a){if(!a){return false}$j("#bookacti-delete-template-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button",click:function(){var b={action:"bookactiDeactivateTemplate",template_id:a,nonce:$j("#nonce_edit_template").val()};$j("#bookacti-delete-template-dialog").trigger("bookacti_deactivate_template_before",[b]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:b,type:"POST",dataType:"json",success:function(d){if(d.status==="success"){$j("#bookacti-template-picker option[value="+a+"]").remove();var c=$j("#bookacti-template-picker option:first").val();$j("select.bookacti-template-select-box option[value="+a+"]").remove();if($j("#bookacti-template-picker option").length===1){bookacti_bind_template_dialogs()}$j("#bookacti-delete-template-dialog").trigger("bookacti_template_deactivated",[d,b]);bookacti_switch_template(c)}else{var e=typeof d.message!=="undefined"?d.message:bookacti_localized.error;alert(e);console.log(e);console.log(d)}},error:function(c){alert("AJAX "+bookacti_localized.error);console.log(c)},complete:function(){bookacti_stop_template_loading()}});$j(this).dialog("close");$j("#bookacti-template-data-dialog").dialog("close")}},{text:bookacti_localized.dialog_button_cancel,click:function(){$j(this).dialog("close")}}]);$j("#bookacti-delete-template-dialog").dialog("open")}function bookacti_dialog_update_event(p){var o=$j.trim($j("#bookacti-event-data-dialog").dialog("option","title").replace(/\(.*?\)/,""));$j("#bookacti-event-data-dialog").dialog({title:o+" ("+bookacti_localized.edit_id+": "+p.id+")"});$j("#bookacti-event-data-dialog").data("event-id",p.id);$j("#bookacti-event-data-dialog").attr("data-event-id",p.id);var f=bookacti.booking_system["bookacti-template-calendar"]["events_data"][p.id];var h=[];if(typeof bookacti.booking_system["bookacti-template-calendar"]["bookings"][p.id]!=="undefined"){if($j.isPlainObject(bookacti.booking_system["bookacti-template-calendar"]["bookings"][p.id])){h=$j.map(bookacti.booking_system["bookacti-template-calendar"]["bookings"][p.id],function(u,t){return[u]})}}var a=bookacti.booking_system["bookacti-template-calendar"]["exceptions"][p.id];var l=bookacti_get_event_number_of_bookings($j("#bookacti-template-calendar"),p);var j=bookacti.booking_system["bookacti-template-calendar"]["template_data"]["start"];var k=bookacti.booking_system["bookacti-template-calendar"]["template_data"]["end"];var s=moment.utc(p.start).locale("en");var m=moment.utc(s).clone().add(28,"d").locale("en");var r=s.format("YYYY-MM-DD");var n=m.isBefore(moment.utc(k))?m.format("YYYY-MM-DD"):k;if(f.repeat_from&&f.repeat_from!=="0000-00-00"){r=f.repeat_from}if(f.repeat_to&&f.repeat_to!=="0000-00-00"){n=f.repeat_to}var c=false;var b=moment.utc(r).add(1,"d").locale("en");var g=moment.utc(n).subtract(1,"d").locale("en");if(b.isAfter(g)){c=true}$j("#bookacti-event-title").val(f.multilingual_title);$j("#bookacti-event-availability").val(f.availability);$j("#bookacti-event-availability").attr("min",l);$j('#bookacti-event-repeat-freq option[value="'+f.repeat_freq+'"]').prop("selected",true);$j("#bookacti-event-repeat-from, #bookacti-event-repeat-to").attr("min",j);$j("#bookacti-event-repeat-from, #bookacti-event-repeat-to").attr("max",k);$j("#bookacti-event-repeat-from").val(r);$j("#bookacti-event-repeat-to").val(n);$j("#bookacti-event-exceptions-selectbox").empty();$j("#bookacti-event-exception-date-picker").val(r);if(!c){$j("#bookacti-event-exception-date-picker").attr("disabled",false);$j("#bookacti-event-exception-date-picker").attr("min",b.format("YYYY-MM-DD"));$j("#bookacti-event-exception-date-picker").attr("max",g.format("YYYY-MM-DD"))}else{$j("#bookacti-event-exception-date-picker").attr("disabled",true)}if(h.length){h=bookacti_sort_events_array_by_dates(h,false,false,{start:"event_start",end:"event_end"});if(typeof h[0]["event_start"]!=="undefined"){$j("#bookacti-event-repeat-from").attr("max",h[0]["event_start"].substr(0,10))}if(typeof h[h.length-1]["event_start"]!=="undefined"){$j("#bookacti-event-repeat-to").attr("min",h[h.length-1]["event_start"].substr(0,10))}}if(typeof a!=="undefined"){$j.each(a,function(t,u){$j("#bookacti-event-exceptions-selectbox").append("<option class='bookacti-exception' value='"+u.exception_value+"' >"+u.exception_value+"</option>")})}if(typeof f.settings!=="undefined"){bookacti_fill_fields_from_array(f.settings)}$j("#bookacti-event-data-dialog").trigger("bookacti_event_update_dialog",[p]);if(bookacti_localized.is_qtranslate){$j("#bookacti-event-data-dialog .qtranxs-translatable").each(function(){bookacti_refresh_qtx_field(this)})}bookacti_validate_event_general_data();bookacti_validate_event_repetition_data();var q=[];var d={text:bookacti_localized.dialog_button_ok,click:function(){$j("#bookacti-event-data-dialog").find(".bookacti-loading-alt,.bookacti-notices").remove();var t=moment.utc(p.start).clone().locale("en").format("YYYY-MM-DD HH:mm:ss");var w=moment.utc(p.end).clone().locale("en").format("YYYY-MM-DD HH:mm:ss");$j("#bookacti-event-data-form-event-id").val(p.id);$j("#bookacti-event-data-form-event-start").val(t);$j("#bookacti-event-data-form-event-end").val(w);$j("#bookacti-event-data-form-action").val("bookactiUpdateEvent");$j("#bookacti-event-data-form select[multiple]#bookacti-event-exceptions-selectbox option").prop("selected",true);if(typeof tinyMCE!=="undefined"){if(tinyMCE){tinyMCE.triggerSave()}}var x=bookacti_validate_event_form();if(!x){return}var u=$j("#bookacti-event-data-form").serializeObject();u.interval=bookacti.booking_system["bookacti-template-calendar"]["events_interval"];$j("#bookacti-event-data-dialog").trigger("bookacti_update_event_before",[p,u]);bookacti_start_template_loading();var v='<div class="bookacti-loading-alt"><img class="bookacti-loader" src="'+bookacti_localized.plugin_path+'/img/ajax-loader.gif" title="'+bookacti_localized.loading+'" /><span class="bookacti-loading-alt-text" >'+bookacti_localized.loading+"</span></div>";$j("#bookacti-event-data-dialog").append(v);$j.ajax({url:ajaxurl,data:u,type:"POST",dataType:"json",success:function(y){if(y.status==="success"){var A=p.id;bookacti_unselect_event(p,true);bookacti.booking_system["bookacti-template-calendar"]["events_data"][A]=y.events_data[A];bookacti.booking_system["bookacti-template-calendar"]["groups_events"]=y.groups_events;bookacti.booking_system["bookacti-template-calendar"]["exceptions"][A]=[];$j.each(y.exceptions_dates,function(B,C){bookacti.booking_system["bookacti-template-calendar"]["exceptions"][A].push({exception_type:"date",exception_value:C})});bookacti_clear_events_on_calendar($j("#bookacti-template-calendar"),p);$j("#bookacti-template-calendar").fullCalendar("removeEvents",A);$j("#bookacti-template-calendar").fullCalendar("addEventSource",y.events);$j("#bookacti-event-data-dialog").trigger("bookacti_event_updated",[p,y,u])}else{if(y.status==="failed"){var z=typeof y.message!=="undefined"?y.message:bookacti_localized.error;$j("#bookacti-event-data-dialog").append('<div class="bookacti-notices"><ul class="bookacti-error-list"><li>'+z+"</li></ul></div>");console.log(z);console.log(y)}}if(y.status!=="failed"){$j("#bookacti-event-data-dialog").dialog("close")}},error:function(y){alert("AJAX "+bookacti_localized.error);console.log(y)},complete:function(){$j("#bookacti-event-data-dialog .bookacti-loading-alt").remove();bookacti_stop_template_loading()}})}};q.push(d);var i={text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button bookacti-dialog-left-button",click:function(){bookacti_dialog_delete_event(p)}};q.push(i);var e={};if(f.repeat_freq!=="none"){e={text:bookacti_localized.dialog_button_unbind,"class":"bookacti-dialog-unbind-button bookacti-dialog-left-button",click:function(){bookacti_dialog_unbind_occurrences(p)}};q.push(e)}$j("#bookacti-event-data-dialog").dialog("option","buttons",q);$j("#bookacti-event-data-dialog").dialog("open")}function bookacti_dialog_delete_event(a){$j("#bookacti-delete-event-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button",click:function(){var b={action:"bookactiDeleteEvent",event_id:a.id,nonce:$j("#nonce_delete_event").val()};$j("#bookacti-delete-event-dialog").trigger("bookacti_deactivate_event_before",[a,b]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:b,type:"POST",dataType:"json",success:function(c){if(c.status==="success"){bookacti_delete_event(a);$j("#bookacti-delete-event-dialog").trigger("bookacti_event_deactivated",[a,c,b])}else{if(c.error==="has_bookings"){if(!bookacti_get_event_number_of_bookings($j("#bookacti-template-calendar"),a)){bookacti_refresh_booking_numbers($j("#bookacti-template-calendar"),a.id)}var e=bookacti.booking_system["bookacti-template-calendar"]["events_data"][a.id]["repeat_freq"];if(e!=="none"){bookacti_dialog_unbind_occurrences(a,["delete"])}else{bookacti_dialog_delete_booked_event(a)}}else{var d=typeof c.message!=="undefined"?c.message:bookacti_localized.error;alert(d);console.log(d);console.log(c)}}},error:function(c){alert("AJAX "+bookacti_localized.error);console.log(c)},complete:function(){bookacti_stop_template_loading()}});$j(this).dialog("close");$j("#bookacti-event-data-dialog").dialog("close")}},{text:bookacti_localized.dialog_button_cancel,click:function(){$j(this).dialog("close")}}]);$j("#bookacti-delete-event-dialog").dialog("open")}function bookacti_dialog_delete_booked_event(a){$j("#bookacti-delete-booked-event-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button",click:function(){var b={action:"bookactiDeleteEventForced",event_id:a.id,nonce:$j("#nonce_delete_event_forced").val()};$j("#bookacti-delete-booked-event-dialog").trigger("bookacti_deactivate_event_before",[a,b]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:b,type:"POST",dataType:"json",success:function(c){if(c.status==="success"){bookacti_delete_event(a);$j("#bookacti-delete-booked-event-dialog").trigger("bookacti_event_deactivated",[a,c,b])}else{var d=typeof c.message!=="undefined"?c.message:bookacti_localized.error;alert(d);console.log(d);console.log(c)}},error:function(c){alert("AJAX "+bookacti_localized.error);console.log(c)},complete:function(){bookacti_stop_template_loading()}});$j(this).dialog("close");$j("#bookacti-event-data-dialog").dialog("close")}},{text:bookacti_localized.dialog_button_cancel,click:function(){$j(this).dialog("close")}}]);$j("#bookacti-delete-booked-event-dialog").dialog("open")}function bookacti_dialog_unbind_occurrences(d,f){f=f||[];$j("#bookacti-unbind-booked-event-dialog").dialog("open");if(f.length>0){$j("#bookacti-unbind-booked-event-error-list-container ul li").hide();$j.each(f,function(h,g){if($j("li#bookacti-unbind-booked-event-error-"+g).length){$j("li#bookacti-unbind-booked-event-error-"+g).show()}});$j("#bookacti-unbind-booked-event-error-list-container").show()}else{$j("#bookacti-unbind-booked-event-error-list-container").hide()}var e={text:bookacti_localized.dialog_button_unbind_selected,"class":"bookacti-dialog-delete-button",click:function(){bookacti_unbind_occurrences(d,"selected");$j("#bookacti-event-data-dialog").dialog("close")}};var a={text:bookacti_localized.dialog_button_unbind_all_booked,"class":"bookacti-dialog-delete-button",click:function(){bookacti_unbind_occurrences(d,"booked");$j("#bookacti-event-data-dialog").dialog("close")}};var b={text:bookacti_localized.dialog_button_cancel,click:function(){$j(this).dialog("close")}};var c=[e,a,b];$j("#bookacti-unbind-booked-event-dialog").dialog("option","buttons",c)}function bookacti_dialog_choose_activity_creation_type(){if(!bookacti.selected_template){return}var a={text:bookacti_localized.dialog_button_create_activity,click:function(){$j(this).dialog("close");bookacti_dialog_create_activity()}};var d={text:bookacti_localized.dialog_button_import_activity,click:function(){$j(this).dialog("close");bookacti_dialog_import_activity()}};var b={text:bookacti_localized.dialog_button_cancel,click:function(){$j(this).dialog("close")}};var c=[a,d,b];if($j("#bookacti-template-picker option").length<=1){c.unshift(d)}$j("#bookacti-activity-create-method-dialog").dialog("option","buttons",c);$j("#bookacti-activity-create-method-dialog").dialog("open")}function bookacti_dialog_import_activity(){if(!bookacti.selected_template){return}$j("#template-import-bound-activities option").attr("disabled",false);$j('#template-import-bound-activities option[value="'+bookacti.selected_template+'"]').attr("disabled",true);$j("#template-import-bound-activities").children("option:enabled").eq(0).prop("selected",true);$j("#template-import-bound-activities").trigger("change");$j("#bookacti-activity-import-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_ok,click:function(){$j("#bookacti-activity-import-dialog .bookacti-input-error").removeClass("bookacti-input-error");$j("#bookacti-activity-import-dialog .bookacti-form-error").remove();var a=$j("select#activities-to-import").val();if($j.isEmptyObject(a)){$j("#activities-to-import").addClass("bookacti-input-error");$j("#bookacti-activities-bound-to-template").append('<div class="bookacti-form-error" >'+bookacti_localized.error_fill_field+"</div>");return}var b={action:"bookactiImportActivities",activity_ids:a,template_id:bookacti.selected_template,nonce:$j("#nonce_import_activity").val()};$j("#bookacti-activity-import-dialog").trigger("bookacti_import_activities_before",[b]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:b,type:"POST",dataType:"json",success:function(c){if(c.status==="success"){bookacti.booking_system["bookacti-template-calendar"]["activities_data"]=c.activities_data;if(c.activity_list){$j("#bookacti-template-activity-list").empty().append(c.activity_list)}$j.each(a,function(e,f){$j('select#activities-to-import option[value="'+f+'"]').remove()});bookacti_init_activities();$j("#bookacti-activity-import-dialog").trigger("bookacti_activities_imported",[c,b]);$j("#bookacti-activity-import-dialog").dialog("close");$j("#bookacti-activity-create-method-dialog").dialog("close")}else{var d=typeof c.message!=="undefined"?c.message:bookacti_localized.error;$j("#bookacti-activities-bound-to-template").append('<div class="bookacti-form-error" >'+d+"</div>");console.log(d);console.log(c)}},error:function(c){alert("AJAX "+bookacti_localized.error);console.log(c)},complete:function(){bookacti_stop_template_loading()}})}},{text:bookacti_localized.dialog_button_cancel,click:function(){$j(this).dialog("close")}}]);$j("#bookacti-activity-import-dialog").dialog("open")}function bookacti_dialog_create_activity(){if(!bookacti.selected_template){return}var a=$j.trim($j("#bookacti-activity-data-dialog").dialog("option","title").replace(/\(.*?\)/,""));$j("#bookacti-activity-data-dialog").dialog({title:a+" ("+bookacti_localized.create_new+")"});$j("#bookacti-activity-template-id").val(bookacti.selected_template);$j("#bookacti-activity-activity-id").val("");$j("#bookacti-activity-color").val("#3a87ad");$j("#bookacti-activity-action").val("bookactiInsertActivity");$j("#bookacti-activity-data-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_ok,click:function(){$j("#bookacti-activity-data-form select[multiple].bookacti-items-select-box option").prop("selected",true);if(typeof tinyMCE!=="undefined"){if(tinyMCE){tinyMCE.triggerSave()}}var c=bookacti_validate_activity_form();if(!c){return}var b=$j("#bookacti-activity-data-form").serializeObject();$j("#bookacti-activity-data-dialog").trigger("bookacti_insert_activity_before",[b]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:b,type:"POST",dataType:"json",success:function(d){if(d.status==="success"){bookacti.booking_system["bookacti-template-calendar"]["activities_data"][d.activity_id]=d.activity_data;if(d.activity_list){$j("#bookacti-template-activity-list").empty().append(d.activity_list)}bookacti_init_activities();$j("#bookacti-activity-data-dialog").trigger("bookacti_activity_inserted",[d,b])}else{if(d.status==="failed"){var e=typeof d.message!=="undefined"?d.message:bookacti_localized.error;alert(e);console.log(e);console.log(d)}}},error:function(d){alert("AJAX "+bookacti_localized.error);console.log(d)},complete:function(){bookacti_stop_template_loading()}});$j("#bookacti-activity-data-dialog").dialog("close");$j("#bookacti-activity-create-method-dialog").dialog("close")}}]);$j("#bookacti-activity-data-dialog").dialog("open")}function bookacti_dialog_update_activity(c){if(!bookacti.selected_template||!c){return}var e=$j.trim($j("#bookacti-activity-data-dialog").dialog("option","title").replace(/\(.*?\)/,""));$j("#bookacti-activity-data-dialog").dialog({title:e+" ("+bookacti_localized.edit_id+": "+c+")"});var d=bookacti.booking_system["bookacti-template-calendar"]["activities_data"][c];$j("#bookacti-activity-template-id").val(bookacti.selected_template);$j("#bookacti-activity-activity-id").val(c);$j("#bookacti-activity-action").val("bookactiUpdateActivity");$j("#bookacti-activity-data-dialog .bookacti-add-new-items-select-box option").show().attr("disabled",false);$j("#bookacti-activity-title").val(d.multilingual_title);$j("#bookacti-activity-color").val(d.color);$j("#bookacti-activity-availability").val(d.availability);var a=d.duration?d.duration:"000.01:00:00";$j("#bookacti-activity-duration-days").val(a.substr(0,3)).trigger("change");$j("#bookacti-activity-duration-hours").val(a.substr(4,2)).trigger("change");$j("#bookacti-activity-duration-minutes").val(a.substr(7,2)).trigger("change");if(d.is_resizable==1){$j("#bookacti-activity-resizable").prop("checked",true)}else{$j("#bookacti-activity-resizable").prop("checked",false)}if(d.admin.length){var b=$j("#bookacti-activity-managers-container");bookacti_fill_items_selectbox(b,d.admin)}if(d.settings){bookacti_fill_fields_from_array(d.settings,"activityOptions")}$j("#bookacti-activity-data-dialog").trigger("bookacti_activity_update_dialog",[c]);if(bookacti_localized.is_qtranslate){$j("#bookacti-activity-data-dialog .qtranxs-translatable").each(function(){bookacti_refresh_qtx_field(this)})}$j("#bookacti-activity-data-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_ok,click:function(){$j("#bookacti-activity-data-form select[multiple].bookacti-items-select-box option").prop("selected",true);if(typeof tinyMCE!=="undefined"){if(tinyMCE){tinyMCE.triggerSave()}}var g=bookacti_validate_activity_form();if(!g){return}var f=$j("#bookacti-activity-data-form").serializeObject();$j("#bookacti-activity-data-dialog").trigger("bookacti_update_activity_before",[f]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:f,type:"POST",dataType:"json",success:function(h){if(h.status==="success"){bookacti.booking_system["bookacti-template-calendar"]["activities_data"][c]=h.activity_data;if(h.activity_list){$j("#bookacti-template-activity-list").empty().append(h.activity_list)}bookacti_init_activities();bookacti_refetch_events_on_template();$j("#bookacti-activity-data-dialog").trigger("bookacti_activity_updated",[h,f])}else{if(h.status==="failed"){var i=typeof h.message!=="undefined"?h.message:bookacti_localized.error;alert(i);console.log(i);console.log(h)}}},error:function(h){alert("AJAX "+bookacti_localized.error);console.log(h)},complete:function(){bookacti_stop_template_loading()}});$j(this).dialog("close")}},{text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button bookacti-dialog-left-button",click:function(){bookacti_dialog_delete_activity(c)}}]);$j("#bookacti-activity-data-dialog").dialog("open")}function bookacti_dialog_delete_activity(a){if(!a){return}$j("#bookacti-delete-activity-events").prop("checked",false);$j("#bookacti-delete-activity-dialog").dialog("open");$j("#bookacti-delete-activity-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button",click:function(){var b=$j("#bookacti-delete-activity-events").is(":checked")?1:0;var c={action:"bookactiDeactivateActivity",activity_id:a,template_id:bookacti.selected_template,delete_events:b,nonce:$j("#nonce_deactivate_activity").val()};$j("#bookacti-delete-activity-dialog").trigger("bookacti_deactivate_activity_before",[c]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:c,type:"POST",dataType:"json",success:function(d){if(d.status==="success"){delete bookacti.booking_system["bookacti-template-calendar"]["activities_data"][a];$j('.fc-event[data-activity-id="'+a+'"]').parents(".activity-row").remove();if(b){bookacti_refetch_events_on_template()}bookacti_display_activity_tuto_if_no_activity_available();$j("#bookacti-delete-activity-dialog").trigger("bookacti_activity_deactivated",[d,c])}else{var e=typeof d.message!=="undefined"?d.message:bookacti_localized.error;alert(e);console.log(d)}},error:function(d){alert("AJAX "+bookacti_localized.error);console.log(d)},complete:function(){bookacti_stop_template_loading()}});$j(this).dialog("close");$j("#bookacti-activity-data-dialog").dialog("close");$j("#bookacti-activity-create-method-dialog").dialog("close")}},{text:bookacti_localized.dialog_button_cancel,click:function(){$j(this).dialog("close")}}])}function bookacti_dialog_create_group_of_events(a){a=a?a:bookacti.selected_category;var b=$j.trim($j("#bookacti-group-of-events-dialog").dialog("option","title").replace(/\(.*?\)/,""));$j("#bookacti-group-of-events-dialog").dialog({title:b+" ("+bookacti_localized.create_new+")"});if($j("#bookacti-group-of-events-category-selectbox option").length>1){a=$j('#bookacti-group-of-events-category-selectbox option[value="'+a+'"]').length?a:"new";$j("#bookacti-group-of-events-category-selectbox").val(a).trigger("change")}else{$j("#bookacti-group-of-events-new-category-title").show()}$j("#bookacti-group-of-events-summary").empty();bookacti.booking_system["bookacti-template-calendar"]["selected_events"]=bookacti_sort_events_array_by_dates(bookacti.booking_system["bookacti-template-calendar"]["selected_events"]);$j.each(bookacti.booking_system["bookacti-template-calendar"]["selected_events"],function(e,h){var g=moment.utc(h.start);var d=moment.utc(h.end);var c=g.formatPHP(bookacti_localized.date_format)+bookacti_localized.dates_separator+d.formatPHP(bookacti_localized.date_format);if(h.start.substr(0,10)===h.end.substr(0,10)){c=g.formatPHP(bookacti_localized.date_format)+bookacti_localized.date_time_separator+d.formatPHP(bookacti_localized.time_format)}var f=$j("<option></option>",{html:c+" - "+h.title});f.appendTo("#bookacti-group-of-events-summary")});$j("#bookacti-group-of-events-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_ok,click:function(){$j("#bookacti-group-of-events-action").val("bookactiInsertGroupOfEvents");$j("#bookacti-group-of-events-form select[multiple].bookacti-items-select-box option").prop("selected",true);var c=$j("#bookacti-group-of-events-category-selectbox").val();bookacti.selected_category=c;if(typeof tinyMCE!=="undefined"){if(tinyMCE){tinyMCE.triggerSave()}}var e=bookacti_validate_group_of_events_form();if(e){var d=$j("#bookacti-group-of-events-form").serializeObject();d.template_id=bookacti.selected_template;d.events=JSON.stringify(bookacti.booking_system["bookacti-template-calendar"]["selected_events"]);$j("#bookacti-group-of-events-dialog").trigger("bookacti_insert_group_of_events_before",[d]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:d,type:"POST",dataType:"json",success:function(f){if(f.status==="success"){bookacti.booking_system["bookacti-template-calendar"]["groups_events"][f.group_id]=f.group_events;bookacti.booking_system["bookacti-template-calendar"]["groups_data"][f.group_id]=f.group;bookacti.booking_system["bookacti-template-calendar"]["group_categories_data"][f.category_id]=f.category;bookacti.booking_system["bookacti-template-calendar"]["selected_events"]=[];$j("#bookacti-template-add-first-group-of-events-container").hide();if(c==="new"){bookacti_add_group_category(f.category_id,f.category.title)}bookacti_add_group_of_events(f.group_id,f.group_title_raw,f.category_id);bookacti_unselect_all_events();$j("#bookacti-template-calendar").fullCalendar("rerenderEvents");$j("#bookacti-group-of-events-dialog").trigger("bookacti_group_of_events_inserted",[f,d])}else{var g=typeof f.message!=="undefined"?f.message:bookacti_localized.error;alert(g);console.log(f)}},error:function(f){alert("AJAX "+bookacti_localized.error);console.log(f)},complete:function(){bookacti_stop_template_loading()}});$j("#bookacti-group-of-events-dialog").dialog("close")}}}]);$j("#bookacti-group-of-events-dialog").dialog("open")}function bookacti_dialog_update_group_of_events(d){var e=$j.trim($j("#bookacti-group-of-events-dialog").dialog("option","title").replace(/\(.*?\)/,""));$j("#bookacti-group-of-events-dialog").dialog({title:e+" ("+bookacti_localized.edit_id+": "+d+")"});var c=$j('.bookacti-group-of-events[data-group-id="'+d+'"]').parents(".bookacti-group-category").data("group-category-id");var b=c?c:"new";$j("#bookacti-group-of-events-category-selectbox").val(c).trigger("change");$j("#bookacti-group-of-events-summary").empty();bookacti.booking_system["bookacti-template-calendar"]["selected_events"]=bookacti_sort_events_array_by_dates(bookacti.booking_system["bookacti-template-calendar"]["selected_events"]);$j.each(bookacti.booking_system["bookacti-template-calendar"]["selected_events"],function(h,l){var k=moment.utc(l.start);var g=moment.utc(l.end);var f=k.formatPHP(bookacti_localized.date_format)+bookacti_localized.dates_separator+g.formatPHP(bookacti_localized.date_format);if(l.start.substr(0,10)===l.end.substr(0,10)){f=k.formatPHP(bookacti_localized.date_format)+bookacti_localized.date_time_separator+g.formatPHP(bookacti_localized.time_format)}var j=$j("<option></option>",{html:f+" - "+l.title});j.appendTo("#bookacti-group-of-events-summary")});var a=bookacti.booking_system["bookacti-template-calendar"]["groups_data"][d];$j("#bookacti-group-of-events-title-field").val(a.multilingual_title);if(a.settings){bookacti_fill_fields_from_array(a.settings,"groupOfEventsOptions")}$j("#bookacti-group-of-events-dialog").trigger("bookacti_group_of_events_update_dialog",[d]);if(bookacti_localized.is_qtranslate){$j("#bookacti-group-of-events-dialog .qtranxs-translatable").each(function(){bookacti_refresh_qtx_field(this)})}$j("#bookacti-group-of-events-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_ok,click:function(){$j("#bookacti-group-of-events-action").val("bookactiUpdateGroupOfEvents");$j("#bookacti-group-of-events-form select[multiple].bookacti-items-select-box option").prop("selected",true);var f=$j("#bookacti-group-of-events-category-selectbox").val();bookacti.selected_category=f;if(typeof tinyMCE!=="undefined"){if(tinyMCE){tinyMCE.triggerSave()}}var h=bookacti_validate_group_of_events_form();if(h){var g=$j("#bookacti-group-of-events-form").serializeObject();g.group_id=d;g.events=JSON.stringify(bookacti.booking_system["bookacti-template-calendar"]["selected_events"]);$j("#bookacti-group-of-events-dialog").trigger("bookacti_update_group_of_events_before",[g]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:g,type:"POST",dataType:"json",success:function(i){if(i.status==="success"){bookacti.booking_system["bookacti-template-calendar"]["groups_events"][d]=i.group_events;bookacti.booking_system["bookacti-template-calendar"]["groups_data"][d]=i.group;bookacti.booking_system["bookacti-template-calendar"]["group_categories_data"][i.category_id]=i.category;bookacti.booking_system["bookacti-template-calendar"]["selected_events"]=[];if(f==="new"){bookacti_add_group_category(i.category_id,i.category.title)}if(b!=f){$j('.bookacti-group-of-events[data-group-id="'+d+'"]').remove();bookacti_add_group_of_events(d,i.group_title_raw,i.category_id)}else{$j('.bookacti-group-of-events[data-group-id="'+d+'"] .bookacti-group-of-events-title').attr("title",i.group_title_raw);$j('.bookacti-group-of-events[data-group-id="'+d+'"] .bookacti-group-of-events-title').html(i.group_title_raw)}bookacti_unselect_all_events();$j("#bookacti-template-calendar").fullCalendar("rerenderEvents");$j("#bookacti-group-of-events-dialog").trigger("bookacti_group_of_events_updated",[i,g])}else{if(i.status==="failed"){var j=typeof i.message!=="undefined"?i.message:bookacti_localized.error;alert(j)}console.log(i)}},error:function(i){alert("AJAX "+bookacti_localized.error);console.log(i)},complete:function(){bookacti_stop_template_loading()}});$j("#bookacti-group-of-events-dialog").dialog("close")}}},{text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button bookacti-dialog-left-button",click:function(){bookacti_dialog_delete_group_of_events(d)}}]);$j("#bookacti-group-of-events-dialog").dialog("open")}function bookacti_dialog_delete_group_of_events(a){$j("#bookacti-delete-group-of-events-dialog").dialog("open");$j("#bookacti-delete-group-of-events-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button",click:function(){var b={action:"bookactiDeleteGroupOfEvents",group_id:a,nonce:$j("#nonce_delete_group_of_events").val()};$j("#bookacti-delete-group-of-events-dialog").trigger("bookacti_deactivate_group_of_events_before",[b]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:b,type:"POST",dataType:"json",success:function(c){if(c.status==="success"){delete bookacti.booking_system["bookacti-template-calendar"]["groups_data"][a];delete bookacti.booking_system["bookacti-template-calendar"]["groups_events"][a];bookacti.booking_system["bookacti-template-calendar"]["selected_events"]=[];$j('.bookacti-group-of-events[data-group-id="'+a+'"]').remove();$j("#bookacti-template-calendar").fullCalendar("rerenderEvents");$j("#bookacti-insert-group-of-events").css("visibility","hidden");$j("#bookacti-delete-group-of-events-dialog").trigger("bookacti_group_of_events_deactivated",[c,b])}else{var d=typeof c.message!=="undefined"?c.message:bookacti_localized.error;alert(d);console.log(c)}},error:function(c){alert("AJAX "+bookacti_localized.error);console.log(c)},complete:function(){bookacti_stop_template_loading()}});$j(this).dialog("close");$j("#bookacti-group-of-events-dialog").dialog("close")}},{text:bookacti_localized.dialog_button_cancel,click:function(){$j(this).dialog("close")}}])}function bookacti_dialog_update_group_category(b){var c=$j.trim($j("#bookacti-group-category-dialog").dialog("option","title").replace(/\(.*?\)/,""));$j("#bookacti-group-category-dialog").dialog({title:c+" ("+bookacti_localized.edit_id+": "+b+")"});var a=bookacti.booking_system["bookacti-template-calendar"]["group_categories_data"][b];$j("#bookacti-group-category-title-field").val(a.multilingual_title);if(a.settings){bookacti_fill_fields_from_array(a.settings,"groupCategoryOptions")}$j("#bookacti-group-category-dialog").trigger("bookacti_group_category_update_dialog",[b]);if(bookacti_localized.is_qtranslate){$j("#bookacti-group-category-dialog .qtranxs-translatable").each(function(){bookacti_refresh_qtx_field(this)})}$j("#bookacti-group-category-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_ok,click:function(){$j("#bookacti-group-category-action").val("bookactiUpdateGroupCategory");$j("#bookacti-group-category-form select[multiple].bookacti-items-select-box option").prop("selected",true);if(typeof tinyMCE!=="undefined"){if(tinyMCE){tinyMCE.triggerSave()}}var e=bookacti_validate_group_category_form();if(e){var d=$j("#bookacti-group-category-form").serializeObject();d.category_id=b;$j("#bookacti-group-category-dialog").trigger("bookacti_update_group_category_before",[d]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:d,type:"POST",dataType:"json",success:function(f){if(f.status==="success"){bookacti.booking_system["bookacti-template-calendar"]["group_categories_data"][b]=f.category;var g=f.category.title.length>16?f.category.title.substr(0,16)+"&#8230;":f.category.title;$j('.bookacti-group-category[data-group-category-id="'+b+'"] .bookacti-group-category-title').attr("title",f.category.title);$j('.bookacti-group-category[data-group-category-id="'+b+'"] .bookacti-group-category-title span').html(g);$j('#bookacti-group-of-events-category-selectbox option[value="'+b+'"]').html(f.category.title);$j("#bookacti-group-category-dialog").trigger("bookacti_group_category_updated",[f,d])}else{if(f.status==="failed"){var h=typeof f.message!=="undefined"?f.message:bookacti_localized.error;alert(h);console.log(f)}}},error:function(f){alert("AJAX "+bookacti_localized.error);console.log(f)},complete:function(){bookacti_stop_template_loading()}});$j("#bookacti-group-category-dialog").dialog("close")}}},{text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button bookacti-dialog-left-button",click:function(){bookacti_dialog_delete_group_category(b)}}]);$j("#bookacti-group-category-dialog").dialog("open")}function bookacti_dialog_delete_group_category(a){$j("#bookacti-delete-group-category-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_delete,"class":"bookacti-dialog-delete-button",click:function(){var b={action:"bookactiDeleteGroupCategory",category_id:a,nonce:$j("#nonce_delete_group_category").val()};$j("#bookacti-delete-group-category-dialog").trigger("bookacti_deactivate_group_category_before",[b]);bookacti_start_template_loading();$j.ajax({url:ajaxurl,data:b,type:"POST",dataType:"json",success:function(c){if(c.status==="success"){delete bookacti.booking_system["bookacti-template-calendar"]["group_categories_data"][a];bookacti.booking_system["bookacti-template-calendar"]["selected_events"]=[];var e=[];$j.each(bookacti.booking_system["bookacti-template-calendar"]["groups_data"],function(g,f){if(f.category_id==a){e.push(f.id)}});$j.each(e,function(g,f){delete bookacti.booking_system["bookacti-template-calendar"]["groups_events"][f];delete bookacti.booking_system["bookacti-template-calendar"]["groups_data"][f]});$j('.bookacti-group-category[data-group-category-id="'+a+'"]').remove();$j('#bookacti-group-of-events-category-selectbox option[value="'+a+'"]').remove();$j("#bookacti-template-calendar").fullCalendar("rerenderEvents");$j("#bookacti-insert-group-of-events").css("visibility","hidden");if(!$j(".bookacti-group-category").length){$j("#bookacti-template-add-group-of-events-tuto-select-events").show()}$j("#bookacti-delete-group-category-dialog").trigger("bookacti_group_category_deactivated",[c,b])}else{var d=typeof c.message!=="undefined"?c.message:bookacti_localized.error;alert(d);console.log(c)}},error:function(c){alert("AJAX "+bookacti_localized.error);console.log(c)},complete:function(){bookacti_stop_template_loading()}});$j(this).dialog("close");$j("#bookacti-group-category-dialog").dialog("close")}},{text:bookacti_localized.dialog_button_cancel,click:function(){$j(this).dialog("close")}}]);$j("#bookacti-delete-group-category-dialog").dialog("open")};