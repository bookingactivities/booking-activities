$j(document).ready(function(){var e=$j("#bookacti-booking-system-bookings-page"),f=e.attr("id");if(!e.length)return!1;bookacti_update_template_related_filters();$j("body").on("bookacti_init_booking_sytem",".bookacti-booking-system#bookacti-booking-system-bookings-page",function(a,b,c){$j("#bookacti-booking-system-filter-container").is(":visible")||(b.load=!1)});$j("#bookacti-booking-filter-booking-id, #bookacti-booking-filter-booking-group-id").on("change",function(){"bookacti-booking-filter-booking-group-id"===
$j(this).attr("id")?$j("#bookacti-booking-filter-booking-id").val(""):"bookacti-booking-filter-booking-id"===$j(this).attr("id")&&$j("#bookacti-booking-filter-booking-group-id").val("");$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});$j("#bookacti-booking-filter-templates, #bookacti-booking-filter-status, #bookacti-booking-filter-customer").on("change",function(){bookacti_update_template_related_filters();if($j("#bookacti-submit-filter-button").data("ajax")){if($j("#bookacti-booking-system-filter-container").is(":visible")){var a=
$j("#bookacti-booking-system-bookings-page");bookacti_reload_booking_system_according_to_filters(a)}bookacti_filter_booking_list()}});$j("#bookacti-pick-event-filter").on("click",function(){var a=$j("#bookacti-booking-system-bookings-page");if($j("#bookacti-booking-system-filter-container").is(":visible"))a=$j("#bookacti-pick-event-filter").data("label-show"),$j("#bookacti-pick-event-filter").text(a).attr("title",a),$j("#bookacti-pick-event-filter-instruction").hide(200);else{var b=a.attr("id"),c=
$j("#bookacti-booking-filter-templates").val()?$j("#bookacti-booking-filter-templates").val():[],d=$j("#bookacti-booking-filter-status").val()?$j("#bookacti-booking-filter-status").val():[],g=$j("#bookacti-booking-filter-customer").val()?[$j("#bookacti-booking-filter-customer").val()]:[];bookacti_compare_arrays(bookacti.booking_system[b].calendars,c)&&bookacti_compare_arrays(bookacti.booking_system[b].status,d)&&bookacti_compare_arrays(bookacti.booking_system[b].user_id,g)||bookacti_reload_booking_system_according_to_filters(a);
a=$j("#bookacti-pick-event-filter").data("label-hide");$j("#bookacti-pick-event-filter").text(a).attr("title",a);$j("#bookacti-pick-event-filter-instruction").show(200)}$j("#bookacti-booking-system-filter-container").toggle(200)});$j("#bookacti-unpick-events-filter").on("click",function(){bookacti_unpick_all_events_filter();$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});$j("#bookacti-booking-system-bookings-page").on("bookacti_event_click",function(a,b,c,d){$j("#bookacti-pick-event-filter-instruction").hide(200);
$j("#bookacti-unpick-events-filter").show(200);$j("#bookacti-picked-events-actions-container").show(200);($j.isEmptyObject(c)||!d)&&$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});$j("#bookacti-booking-system-bookings-page").on("bookacti_group_of_events_chosen",function(a,b,c,d){$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});$j("#bookacti-booking-filter-activities").on("change",function(){bookacti_unpick_all_events_filter();
bookacti_booking_method_rerender_events($j("#bookacti-booking-system-bookings-page"));$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});$j("#bookacti-booking-filter-dates-from, #bookacti-booking-filter-dates-to").on("change",function(){bookacti_unpick_all_events_filter();bookacti_refresh_calendar_according_to_date_filter();$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});e.on("bookacti_calendar_event_class_names",function(a,b,c){a=
"undefined"!==typeof c.event.groupId?parseInt(c.event.groupId):parseInt(c.event.id);a=bookacti.booking_system[f].events_data[a].activity_id;c=$j("#bookacti-booking-filter-activities").val()?$j("#bookacti-booking-filter-activities").val():[];$j.isNumeric(c)&&(c=[c]);c&&$j.isArray(c)&&c.length&&-1===$j.inArray(a+"",c)&&b.class_names.push("bookacti-event-hidden")});e.on("bookacti_calendar_event_content",function(a,b,c){a=-1;for(var d=0;d<b.domNodes.length;d++)if(b.domNodes[d].classList.contains("bookacti-availability-container")){a=
d;break}0>a||(c=parseInt(bookacti.booking_system[f].events_data[c.event.groupId].availability),d=$j(b.domNodes[a]),d.find(".bookacti-available-places").append(' / <span class="bookacti-total-places-number">'+c+"</span>"),b.domNodes[a]=d[0])});$j("#bookacti-bookings-calendar-settings").on("click",function(){bookacti_dialog_update_bookings_calendar_settings()});$j("#bookacti-bookings-calendar-settings-dialog").on("change","#bookacti-tooltip_booking_list",function(){$j(this).is(":checked")?$j("#bookacti-event-booking-list-columns-container").show():
$j("#bookacti-event-booking-list-columns-container").hide()});$j("#bookacti-booking-list-filters-form").on("submit",function(a){$j("#bookacti-submit-filter-button").data("ajax")&&(a.preventDefault(),bookacti_filter_booking_list())});bookacti_refresh_booking_group_frame();$j("body").on("submit",".bookacti-list-table-go-to-page-form",function(a){$j("#bookacti-submit-filter-button").data("ajax")&&(a.preventDefault(),a=$j(this).find(".current-page").val(),bookacti_filter_booking_list(a))});$j("#bookacti-bookings-container").on("click",
".first-page, .prev-page, .next-page, .last-page",function(a){if($j("#bookacti-submit-filter-button").data("ajax")){a.preventDefault();a=$j(this).attr("href");var b=a.indexOf("paged=");a=-1!==b?a.substr(b+6):1;bookacti_filter_booking_list(a)}});$j("body").on("click",".bookacti-list-table .check-column input",function(){var a=$j("#bookacti-bookings-container tbody .check-column input:checked").length;if(a){$j("#bookacti-bookings-container .bookacti-select-all-container").remove();$j("#bookacti-all-selected").val(0);
a='<span class="bookacti-nb-selected">'+bookacti_localized.nb_selected.replace("{nb}",a)+"</span>";var b='<button class="bookacti-select-all button">'+bookacti_localized.select_all.replace("{nb}",$j("#bookacti-bookings-container .displaying-num").first().text())+"</button>";$j("#bookacti-bookings-container .tablenav .bulkactions").append('<span class="bookacti-select-all-container">'+a+b+"</span>")}else bookacti_unselect_all_bookings()});$j("body").on("click","#bookacti-booking-list .bookacti-select-all",
function(a){a.preventDefault();$j('#bookacti-bookings-container thead .check-column input[type="checkbox"]').prop("checked",!1).trigger("click.wp-toggle-checkboxes");a='<span class="bookacti-nb-selected">'+bookacti_localized.nb_selected.replace("{nb}",$j("#bookacti-bookings-container .displaying-num").first().text())+"</span>";var b='<button class="bookacti-unselect-all button">'+bookacti_localized.unselect_all+"</button>";$j("#bookacti-bookings-container .tablenav .bookacti-nb-selected").replaceWith(a);
$j("#bookacti-bookings-container .tablenav .bookacti-select-all").replaceWith(b);$j("#bookacti-all-selected").val(1)});$j("body").on("click","#bookacti-booking-list .bookacti-unselect-all",function(a){a.preventDefault();bookacti_unselect_all_bookings()})});
