$j(document).ready(function(){var e=$j("#bookacti-booking-system-bookings-page"),f=e.attr("id");if(!e.length)return!1;bookacti_update_template_related_filters();$j("body").on("bookacti_init_booking_sytem",".bookacti-booking-system#bookacti-booking-system-bookings-page",function(a,c,b){$j("#bookacti-booking-system-filter-container").is(":visible")||(c.load=!1)});$j("#bookacti-booking-filter-templates, #bookacti-booking-filter-status, #bookacti-booking-filter-customer").on("change",function(){bookacti_update_template_related_filters();
if($j("#bookacti-submit-filter-button").data("ajax")){if($j("#bookacti-booking-system-filter-container").is(":visible")){var a=$j("#bookacti-booking-system-bookings-page");bookacti_reload_booking_system_according_to_filters(a)}bookacti_filter_booking_list()}});$j("#bookacti-pick-event-filter").on("click",function(){var a=$j("#bookacti-booking-system-bookings-page");if($j("#bookacti-booking-system-filter-container").is(":visible"))a=$j("#bookacti-pick-event-filter").data("label-show"),$j("#bookacti-pick-event-filter").text(a).attr("title",
a),$j("#bookacti-pick-event-filter-instruction").hide(200);else{var c=a.attr("id"),b=$j("#bookacti-booking-filter-templates").val()?$j("#bookacti-booking-filter-templates").val():[],d=$j("#bookacti-booking-filter-status").val()?$j("#bookacti-booking-filter-status").val():[],g=$j("#bookacti-booking-filter-customer").val()?$j("#bookacti-booking-filter-customer").val():0;bookacti_compare_arrays(bookacti.booking_system[c].calendars,b)&&bookacti_compare_arrays(bookacti.booking_system[c].status,d)&&bookacti.booking_system[c].user_id===
g||bookacti_reload_booking_system_according_to_filters(a);a=$j("#bookacti-pick-event-filter").data("label-hide");$j("#bookacti-pick-event-filter").text(a).attr("title",a);$j("#bookacti-pick-event-filter-instruction").show(200)}$j("#bookacti-booking-system-filter-container").toggle(200)});$j("#bookacti-unpick-events-filter").on("click",function(){bookacti_unpick_all_events_filter();$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});$j("#bookacti-booking-system-bookings-page").on("bookacti_event_click",
function(a,c,b,d){$j("#bookacti-pick-event-filter-instruction").hide(200);$j("#bookacti-unpick-events-filter").show(200);$j("#bookacti-picked-events-actions-container").show(200);($j.isEmptyObject(b)||!d)&&$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});$j("#bookacti-booking-system-bookings-page").on("bookacti_group_of_events_chosen",function(a,c,b,d){$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});$j("#bookacti-booking-filter-activities").on("change",
function(){bookacti_unpick_all_events_filter();bookacti_booking_method_rerender_events($j("#bookacti-booking-system-bookings-page"));$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});$j("#bookacti-booking-filter-dates-from, #bookacti-booking-filter-dates-to").on("change",function(){bookacti_unpick_all_events_filter();bookacti_refresh_calendar_according_to_date_filter();$j("#bookacti-submit-filter-button").data("ajax")&&bookacti_filter_booking_list()});e.on("bookacti_calendar_event_class_names",
function(a,c,b){a="undefined"!==typeof b.event.groupId?parseInt(b.event.groupId):parseInt(b.event.id);a=bookacti.booking_system[f].events_data[a].activity_id;b=$j("#bookacti-booking-filter-activities").val()?$j("#bookacti-booking-filter-activities").val():[];$j.isNumeric(b)&&(b=[b]);b&&$j.isArray(b)&&b.length&&-1===$j.inArray(a+"",b)&&c.class_names.push("bookacti-event-hidden")});e.on("bookacti_calendar_event_content",function(a,c,b){a=-1;for(var d=0;d<c.domNodes.length;d++)if(c.domNodes[d].classList.contains("bookacti-availability-container")){a=
d;break}0>a||(b=parseInt(bookacti.booking_system[f].events_data[b.event.groupId].availability),d=$j(c.domNodes[a]),d.find(".bookacti-available-places").append(' / <span class="bookacti-total-places-number">'+b+"</span>"),c.domNodes[a]=d[0])});$j("#bookacti-bookings-calendar-settings").on("click",function(){bookacti_dialog_update_bookings_calendar_settings()});$j("#bookacti-bookings-calendar-settings-dialog").on("change","#bookacti-tooltip_booking_list",function(){$j(this).is(":checked")?$j("#bookacti-event-booking-list-columns-container").show():
$j("#bookacti-event-booking-list-columns-container").hide()});$j("#bookacti-booking-list-filters-form").on("submit",function(a){$j("#bookacti-submit-filter-button").data("ajax")&&(a.preventDefault(),bookacti_filter_booking_list())});bookacti_refresh_booking_group_frame();$j("#bookacti-booking-list").on("bookacti_booking_list_filtered bookacti_grouped_bookings_displayed",function(){bookacti_init_tooltip();bookacti_refresh_booking_group_frame()});$j("body").on("bookacti_booking_deleted",function(){bookacti_refresh_booking_group_frame()});
$j("body").on("bookacti_booking_rescheduled",function(){bookacti_init_tooltip();var a=$j("#bookacti-booking-system-bookings-page");bookacti_booking_method_refetch_events(a);bookacti_refresh_booking_numbers(a)});$j("body").on("bookacti_booking_state_changed bookacti_payment_status_changed",function(a,c,b,d,g,k,h){bookacti_init_tooltip();if(!h)return!1;a=$j("#bookacti-booking-system-bookings-page");bookacti_refresh_booking_numbers(a)});$j("body").on("bookacti_booking_refunded bookacti_booking_quantity_changed",
function(){bookacti_init_tooltip();var a=$j("#bookacti-booking-system-bookings-page");bookacti_refresh_booking_numbers(a)});$j("body").on("submit",".bookacti-list-table-go-to-page-form",function(a){$j("#bookacti-submit-filter-button").data("ajax")&&(a.preventDefault(),a=$j(this).find(".current-page").val(),bookacti_filter_booking_list(a))});$j("#bookacti-bookings-container").on("click",".first-page, .prev-page, .next-page, .last-page",function(a){if($j("#bookacti-submit-filter-button").data("ajax")){a.preventDefault();
a=$j(this).attr("href");var c=a.indexOf("paged=");a=-1!==c?a.substr(c+6):1;bookacti_filter_booking_list(a)}})});
